# CLAUDE.md

This file provides guidance to Claude Code (claude.ai/code) when working with code in this repository.

## Project Overview

Docusaurus v3.8.1 personal website for Ron Amosa (uncommonengineer.com). Digital garden with technical docs, blog essays, and a changelog system. Hosted on GitHub Pages with custom domain.

## Development Commands

All commands run from the `website/` directory:

```bash
npm run start     # Dev server with hot reload
npm run build     # Production build (use to verify before committing)
npm run serve     # Serve production build locally
npm run deploy    # Deploy to GitHub Pages
npm run clear     # Clear Docusaurus cache (useful when builds behave unexpectedly)
```

No test suite or linter is configured.

## Architecture

### Dual Docs Plugin

The site runs two instances of `@docusaurus/plugin-content-docs`:

1. **Main docs** (preset-classic) â€” `website/docs/` routed to `/docs/`
2. **Changelog docs** (standalone plugin, id: `changelog`) â€” `website/changelog/` routed to `/changelog/`

Both use autogenerated sidebars from filesystem structure. The changelog plugin has its own sidebar config in `sidebars-changelog.js`.

### Custom Pages (React)

`website/src/pages/` contains custom React pages beyond the standard Docusaurus markdown:
- `index.js` â€” Homepage
- `about/` â€” About page
- `projects/` â€” Projects page (data in `src/data/_Projects.js`)
- `subscribe/` â€” Newsletter subscription (Beehiiv embed)
- `components/_SocialLinks.js` â€” Shared social links component

Data files in `src/data/` (`_Projects.js`, `_SocialLinks.js`) define structured content for these pages.

### Theme Customization

- `src/theme/BlogPostItem/` â€” Swizzled blog post component
- `src/css/custom.css` â€” Global style overrides
- Dark mode only (`disableSwitch: true` in config)
- Prism syntax highlighting: Ruby, HCL, Docker, YAML (beyond defaults)

### Static Assets

- `static/img/` â€” All images (referenced as `/img/...` in content)
- `static/js/console-clue.js` â€” Easter egg for PTEC community
- `static/js/metricool.js` â€” Analytics tracking
- `static/CNAME` â€” Custom domain (`www.uncommonengineer.com`)

### Build Configuration

- `onBrokenLinks: 'warn'` and `onBrokenMarkdownLinks: 'warn'` â€” builds won't fail on broken links, but warnings should be addressed
- Google Analytics via `@docusaurus/plugin-google-gtag` (tracking ID: `G-DMRNTVGLRC`)
- Algolia search (appId: `9UFF3RBJQ9`, index: `uncommonengineer.com`)

## Changelog System

**Always update the changelog when making significant changes** (new docs, blog posts, config changes, new features). Skip for typo fixes or formatting-only changes.

Changelog files live in `website/changelog/{YEAR}/{month}.md`. Entries go at the TOP of the file (most recent first).

### Entry Format

```markdown
## ğŸ“… YYYY-MM-DD

### {Category}
- **Title**: Brief description
  - Additional details
  - **Link**: [Link Text](/path/to/content)
```

Categories: ğŸ› ï¸ Site Improvements, ğŸ“š Documentation Updates, ğŸ“ Blog Posts, ğŸ”§ Bug Fixes, ğŸ¨ Design Changes, âš¡ Performance Improvements, ğŸ”’ Security Updates, ğŸ“¦ Dependencies

### New Month File Template

If the current month's file doesn't exist, create it at `website/changelog/{YEAR}/{month}.md`:

```markdown
---
sidebar_position: 1
title: {Month YYYY}
description: Changes and additions for {Month YYYY}
---

# {Month YYYY}

## ğŸ“… YYYY-MM-DD

### {CATEGORY}
- **Your Change**: Description
```

## Content Conventions

### Blog Posts

Filename pattern: `YYYY-MM-DD-Post-Title.md`

Blog posts are **experiential documentation** â€” they document the discovery process, not just solutions. Include:
- The journey and what was tried (including failed approaches)
- Real-world gotchas, edge cases, and unexpected challenges
- Decision rationale for why approaches were chosen
- Testing results with evidence

When content was co-written with AI assistance, include this admonition:

```markdown
:::info ğŸ¤– AI Collaboration
This post was co-written with AI assistance. All technical testing, troubleshooting, and real-world insights are from the author's direct experience. AI helped with structure, clarity, and documentation formatting.
:::
```

### Documentation

Filename pattern: `feature-name-guide.md` (kebab-case)

Organized under `website/docs/` in category directories: `engineer/`, `hacker/`, `study/`, `books/`, `archive/`.

### Frontmatter

All content files require proper frontmatter. Use relative links starting with `/docs/` or `/blog/`.

### Git Commit Messages

Follow conventional commits style:
- `docs: add {feature} documentation and update changelog`
- `feat: implement {feature} and document in changelog`
- `fix: resolve {issue} and update changelog`
