"use strict";(self.webpackChunkronamosa_github_io=self.webpackChunkronamosa_github_io||[]).push([[10431],{7671:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-ConnectSuccess-cc438029ecdd5e5577cdb1b3b56dea0d.png"},9361:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-Demo4-243ef46ad8405a903c861cbbf2700923.png"},19941:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-Github-b1ff937f983f362bcd320b42e5fc1ab3.png"},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var r=o(96540);const s={},t=r.createContext(s);function i(e){const n=r.useContext(t);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(t.Provider,{value:n},e.children)}},34132:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-HerokuConnect-96f351c4d061bd5d500fb0dc8437fbd2.png"},59700:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-ConfigVars-9f847e852db1e4cedefef5507ab9b5e7.png"},63192:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-AddBot-d9b09fbc8116288246c6b757f3139e5b.png"},66604:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-Demo1-f1fc135d4117a628cd1529523533f4f7.png"},68350:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-Demo3-59948c6376caffe297bba527edd951d3.png"},71615:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-AddDiscord-39290d571179f9974da11c23264985c9.png"},73647:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-AddBotPerms-e20dadad5a441e1bc23da6d0415904d2.png"},76438:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-DynoWorker-3842ae4b0f98a45c538c569943ddeedd.png"},79021:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>c,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"engineer/Projects/DiscordBotCameraOn","title":"Discord Bot: Camera\'s On","description":"This is a quick project to have a way to enforce \\"cameras on\\" policy on my Discord server using a bot that will \\"police\\" this. I used Claude 3 Opus to help me develop this. These are my notes.","source":"@site/docs/engineer/Projects/DiscordBotCameraOn.md","sourceDirName":"engineer/Projects","slug":"/engineer/Projects/DiscordBotCameraOn","permalink":"/docs/engineer/Projects/DiscordBotCameraOn","draft":false,"unlisted":false,"editUrl":"https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/engineer/Projects/DiscordBotCameraOn.md","tags":[],"version":"current","lastUpdatedBy":"Ron Amosa","lastUpdatedAt":1771617957000,"frontMatter":{"title":"Discord Bot: Camera\'s On"},"sidebar":"docsSidebar","previous":{"title":"AWS Youtube Transcript Project","permalink":"/docs/aws-youtube-transcripts"},"next":{"title":"Microservices","permalink":"/docs/engineer/Projects/microservices"}}');var s=o(74848),t=o(28453);const i={title:"Discord Bot: Camera's On"},a=void 0,c={},d=[{value:"Overview",id:"overview",level:2},{value:"Discord Bot Application",id:"discord-bot-application",level:2},{value:"Heroku Bot App",id:"heroku-bot-app",level:2},{value:"Create my GH repo",id:"create-my-gh-repo",level:3},{value:"Configure Heroku App",id:"configure-heroku-app",level:3},{value:"Connect GH to Heroku (CLI)",id:"connect-gh-to-heroku-cli",level:3},{value:"Connect GH to Heroku (Manual)",id:"connect-gh-to-heroku-manual",level:3},{value:"Discord Server Setup",id:"discord-server-setup",level:2},{value:"Bot in Action",id:"bot-in-action",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Permissions",id:"permissions",level:3},{value:"Crashed on Heroku",id:"crashed-on-heroku",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.admonition,{type:"info",children:(0,s.jsx)(n.p,{children:'This is a quick project to have a way to enforce "cameras on" policy on my Discord server using a bot that will "police" this. I used Claude 3 Opus to help me develop this. These are my notes.'})}),"\n",(0,s.jsx)(n.admonition,{title:"AI Assisted",type:"caution",children:(0,s.jsx)(n.p,{children:"Please note, I use a combination of Claude 3 Opus (paid) and some ChatGPT-4 (paid) to guide me and generate code, I then run and tweak the steps and code until it works for my use case."})}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Setting up a Discord bot consists of three things"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["Discord Bot Application at ",(0,s.jsx)(n.code,{children:"discord.com"})]}),"\n",(0,s.jsx)(n.li,{children:"A server to run your code on"}),"\n",(0,s.jsx)(n.li,{children:"A Discord server to invite your bot to."}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"discord-bot-application",children:"Discord Bot Application"}),"\n",(0,s.jsx)(n.admonition,{title:"Reference",type:"info",children:(0,s.jsxs)(n.p,{children:["Get notes from here: ",(0,s.jsx)(n.a,{href:"https://discord.com/developers/docs/quick-start/getting-started",children:'"Get Started"'})," guide."]})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Go to the ",(0,s.jsx)(n.a,{href:"https://discord.com/developers/applications",children:"Discord Developer Portal"})]}),"\n",(0,s.jsx)(n.li,{children:"Create a new application, give app (bot) a name."}),"\n",(0,s.jsxs)(n.li,{children:["Go to side menu ",(0,s.jsx)(n.code,{children:"Bot"})]}),"\n",(0,s.jsx)(n.li,{children:"reset Token and copy for later"}),"\n",(0,s.jsxs)(n.li,{children:["disable ",(0,s.jsx)(n.code,{children:"Public Bot"})]}),"\n",(0,s.jsxs)(n.li,{children:["Got to side menu ",(0,s.jsx)(n.code,{children:"OAuth2"}),", look for the ",(0,s.jsx)(n.code,{children:"OAuth2 URL Generator"})]}),"\n",(0,s.jsxs)(n.li,{children:["select scope ",(0,s.jsx)(n.code,{children:"bot"})]}),"\n",(0,s.jsxs)(n.li,{children:["then select permissions ",(0,s.jsx)(n.code,{children:"Send Messages"}),", ",(0,s.jsx)(n.code,{children:"Manage Roles"}),", ",(0,s.jsx)(n.code,{children:"Move Members"})," and ",(0,s.jsx)(n.code,{children:"Read Message History"})]}),"\n",(0,s.jsx)(n.li,{children:"Go down to the generated URL and copy - this is how you add your bot to your server."}),"\n"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:['Permissions-wise, "kicking" someone from a voice channel is actually to "move" them out, so you need ',(0,s.jsx)(n.code,{children:"Move Members"})," and not ",(0,s.jsx)(n.code,{children:"Kick Members"})," which will axe them from the disord server entirely."]})}),"\n",(0,s.jsx)(n.h2,{id:"heroku-bot-app",children:"Heroku Bot App"}),"\n",(0,s.jsx)(n.p,{children:"I'm going to run my bot code on Heroku. I need to create a repo with my code, and link it up with Heroku."}),"\n",(0,s.jsx)(n.h3,{id:"create-my-gh-repo",children:"Create my GH repo"}),"\n",(0,s.jsx)(n.p,{children:"My initial repo consists of the following files:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:".gitignore"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:".env"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"Procfile"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"bot.js"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"package.json"})}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title=.gitignore",children:"node_modules/\n.env\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title=.env",children:"# local dev environment\nBOT_TOKEN=YOUR_BOT_TOKEN\nCAMERA_ON_CHANNELS=CHANNEL_ID_1,CHANNEL_ID_2\nWARNING_TIMEOUT=30000\n"})}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Replace ",(0,s.jsx)(n.code,{children:"YOUR_BOT_TOKEN"})," with your actual bot token"]}),"\n",(0,s.jsxs)(n.li,{children:["Replace ",(0,s.jsx)(n.code,{children:"CHANNEL_ID_1"}),",",(0,s.jsx)(n.code,{children:"CHANNEL_ID_2"})," with the comma-separated list of video channel IDs"]}),"\n",(0,s.jsxs)(n.li,{children:["Adjust the ",(0,s.jsx)(n.code,{children:"WARNING_TIMEOUT"})," value as needed"]}),"\n"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",metastring:"title=Profile",children:"worker: node bot.js\n"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:["This is the final working bot code with a few bells & whistles. I started generating code with Claude 3, but after a few snags went back to ",(0,s.jsx)(n.code,{children:"GPT-4o"})," and my honest opinion, is that GPT gave me better quality code that solved the complex use case quicker than Claude."]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",metastring:"title=bot.js",children:"require('dotenv').config();\nconst Discord = require('discord.js');\nconst client = new Discord.Client();\n\nconst token = process.env.BOT_TOKEN;\nconst cameraOnChannels = process.env.CAMERA_ON_CHANNELS.split(',');\nconst warningTimeout = parseInt(process.env.WARNING_TIMEOUT);\nconst warnedUsers = new Map();\n\nclient.on('ready', () => {\n  console.log(`Logged in as $\\{client.user.tag}!`);\n});\n\nclient.on('error', (error) => {\n  console.error('The bot encountered an error:', error);\n});\n\nclient.on('voiceStateUpdate', async (oldState, newState) => {\n  console.log(`Voice state update detected for user $\\{newState.member.user.tag}. Old Channel: $\\{oldState.channelID}, New Channel: $\\{newState.channelID}, Camera On: $\\{newState.selfVideo}`);\n\n  if (!cameraOnChannels.includes(newState.channelID)) return;\n\n  const member = newState.member;\n  const channel = newState.channel;\n\n  if (newState.channelID !== oldState.channelID && !newState.selfVideo) {\n    // User joined the voice channel with camera disabled\n    console.log(`User $\\{member.user.tag} joined the monitored channel \"$\\{channel.name}\" without camera enabled.`);\n    handleCameraOff(member, channel);\n  } else if (newState.channelID === oldState.channelID && !newState.selfVideo && !warnedUsers.has(member.id)) {\n    // User disabled their camera while in the voice channel\n    console.log(`User $\\{member.user.tag} disabled their camera in the monitored channel \"$\\{channel.name}\".`);\n    handleCameraOff(member, channel);\n  } else if (newState.selfVideo && warnedUsers.has(member.id)) {\n    // User enabled their camera\n    console.log(`User $\\{member.user.tag} enabled their camera in the monitored channel \"$\\{channel.name}\".`);\n    clearWarning(member.id);\n  }\n});\n\nasync function handleCameraOff(member, channel) {\n  try {\n    const warningMessage = await member.send(`\ud83d\udcf7 Attention! Please enable your camera in the channel \"**$\\{channel.name}**\" within the next $\\{warningTimeout / 1000} seconds, or you will be removed from the channel. \ud83d\udea8`);\n    console.log(`Sent warning message to user $\\{member.user.tag}.`);\n\n    const timeoutId = setTimeout(async () => {\n      if (!member.voice.selfVideo) {\n        await member.voice.setChannel(null);\n        await member.send(`\u274c You have been removed from the channel \"**$\\{channel.name}**\" due to not enabling your camera. Please rejoin the channel and enable your camera to participate. \ud83d\ude4f`);\n        console.log(`User $\\{member.user.tag} was removed from the channel \"$\\{channel.name}\" for not enabling their camera.`);\n      }\n    }, warningTimeout);\n\n    warnedUsers.set(member.id, { timeoutId, warningMessage });\n    console.log(`Set timeout for user $\\{member.user.tag}.`);\n  } catch (error) {\n    console.error('Error handling camera off:', error);\n  }\n}\n\nasync function clearWarning(memberId) {\n  const userInfo = warnedUsers.get(memberId);\n  if (userInfo) {\n    clearTimeout(userInfo.timeoutId);\n    warnedUsers.delete(memberId);\n    console.log(`Cleared warning for user with ID $\\{memberId}.`);\n\n    try {\n      await userInfo.warningMessage.edit(`\u2728 Thank you for enabling your camera! Your cooperation is appreciated. \ud83d\ude0a\ud83d\udc4d`);\n      console.log(`Edited warning message for user with ID $\\{memberId}.`);\n    } catch (editError) {\n      console.error(`Failed to edit warning message for user with ID $\\{memberId}:`, editError);\n    }\n  }\n}\n\n// Log in to Discord\nclient.login(token);\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-json",metastring:"title=package.json",children:'{\n  "name": "rxbot",\n  "version": "1.0.0",\n  "description": "A Swiss Army Knife Utility Bot",\n  "main": "bot.js",\n  "scripts": {\n    "start": "node bot.js"\n  },\n  "dependencies": {\n    "discord.js": "^12.5.3"\n  }\n'})}),"\n",(0,s.jsxs)(n.p,{children:["Do the usual things to the code, ",(0,s.jsx)(n.code,{children:'git add . && git commit -m "initial commit"'}),", add remote branch as needed and push ",(0,s.jsx)(n.code,{children:"git push origin main"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"configure-heroku-app",children:"Configure Heroku App"}),"\n",(0,s.jsxs)(n.p,{children:["As per ",(0,s.jsx)(n.code,{children:"bot.js"})," you need to create the following three config vars in your Heroku App."]}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"BOT_TOKEN"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"CAMERA_ON_CHANNELS"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.code,{children:"WARNING_TIMEOUT"})}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"And add your bot token from discord portal, the channel IDs from your discord server and an arbitrary amount of time for the warning."}),"\n",(0,s.jsx)(n.p,{children:"It should look like this:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Config Vars",src:o(59700).A+"",width:"806",height:"204"})}),"\n",(0,s.jsx)(n.h3,{id:"connect-gh-to-heroku-cli",children:"Connect GH to Heroku (CLI)"}),"\n",(0,s.jsx)(n.p,{children:"Install Heroku cli, login."}),"\n",(0,s.jsx)(n.p,{children:"Check remotes on current repo."}),"\n",(0,s.jsxs)(n.p,{children:["Add heroku remote with ",(0,s.jsx)(n.code,{children:"heroku git:remote -a &lt;app-name&gt;"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"~/Repos/rxbot on CameraEnabled !1 \u276f git remote -v\norigin  git@github.com:ronamosa/rxbot.git (fetch)\norigin  git@github.com:ronamosa/rxbot.git (push)\n~/Repos/rxbot on CameraEnabled \u276f heroku git:remote -a rxbot\nset git remote heroku to https://git.heroku.com/rxbot.git\n"})}),"\n",(0,s.jsx)(n.h3,{id:"connect-gh-to-heroku-manual",children:"Connect GH to Heroku (Manual)"}),"\n",(0,s.jsxs)(n.p,{children:["login to Heroku, create your app, go into your app, go to ",(0,s.jsx)(n.code,{children:"Deploy"})," tab and then look for ",(0,s.jsx)(n.code,{children:"Deployment method"})," and see this:"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Connect GitHub",src:o(19941).A+"",width:"1052",height:"184"})}),"\n",(0,s.jsx)(n.p,{children:"Choose github"}),"\n",(0,s.jsxs)(n.p,{children:["Choose the ",(0,s.jsx)(n.code,{children:"rxbot"})," repo and connect it"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Choose repo",src:o(34132).A+"",width:"1632",height:"366"})}),"\n",(0,s.jsx)(n.p,{children:"Successfully connected."}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Connect Success",src:o(7671).A+"",width:"1632",height:"556"})}),"\n",(0,s.jsx)(n.h2,{id:"discord-server-setup",children:"Discord Server Setup"}),"\n",(0,s.jsxs)(n.p,{children:["There's not much to this, the ",(0,s.jsx)(n.code,{children:"OAuth2"})," URL you generated in the Discord portal at the ",(0,s.jsx)(n.a,{href:"#discord-bot-application",children:"beginning"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"Go to that URL and you should see this"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"OAuth URL",src:o(63192).A+"",width:"435",height:"666"})}),"\n",(0,s.jsx)(n.p,{children:"Accept Permissions:"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Accept Perms",src:o(73647).A+"",width:"445",height:"801"})}),"\n",(0,s.jsx)(n.p,{children:"Success!"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Added to Discord",src:o(71615).A+"",width:"890",height:"744"})}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsx)(n.p,{children:"Only realised I had already doxxed myself in the last screenshot after creating my redacted shots 1 and 2 last."})}),"\n",(0,s.jsx)(n.h2,{id:"bot-in-action",children:"Bot in Action"}),"\n",(0,s.jsx)(n.p,{children:'When a user joins the hard-coded channels that are on the "cameras on" list, they get a warning if their camera is off'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Warning",src:o(66604).A+"",width:"656",height:"99"})}),"\n",(0,s.jsx)(n.p,{children:"if they comply, the warning disappears (edited) and a thank you is in it's place"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Comply",src:o(86663).A+"",width:"652",height:"83"})}),"\n",(0,s.jsx)(n.p,{children:"any time a user disables their camera in these rooms, they will get a warning"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"ReWarned",src:o(68350).A+"",width:"648",height:"110"})}),"\n",(0,s.jsx)(n.p,{children:'after 30s of no compliance, the user is re-"moved" from the voice channel'}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Removed",src:o(9361).A+"",width:"674",height:"162"})}),"\n",(0,s.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,s.jsx)(n.h3,{id:"permissions",children:"Permissions"}),"\n",(0,s.jsx)(n.p,{children:"First time running the basic bot code, permissions tweak needed:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"2024-05-17T22:44:01.638622+00:00 app[worker.1]: /app/node_modules/discord.js/src/rest/RequestHandler.js:154\n2024-05-17T22:44:01.638692+00:00 app[worker.1]: throw new DiscordAPIError(request.path, data, request.method, res.status);\n2024-05-17T22:44:01.638693+00:00 app[worker.1]: ^\n2024-05-17T22:44:01.638693+00:00 app[worker.1]:\n2024-05-17T22:44:01.638694+00:00 app[worker.1]: DiscordAPIError: Missing Permissions\n2024-05-17T22:44:01.638694+00:00 app[worker.1]: at RequestHandler.execute (/app/node_modules/discord.js/src/rest/RequestHandler.js:154:13)\n2024-05-17T22:44:01.638694+00:00 app[worker.1]: at process.processTicksAndRejections (node:internal/process/task_queues:95:5)\n2024-05-17T22:44:01.638696+00:00 app[worker.1]: at async RequestHandler.push (/app/node_modules/discord.js/src/rest/RequestHandler.js:39:14)\n2024-05-17T22:44:01.638696+00:00 app[worker.1]: at async GuildMember.edit (/app/node_modules/discord.js/src/structures/GuildMember.js:312:5) {\n2024-05-17T22:44:01.638697+00:00 app[worker.1]: method: 'patch',\n2024-05-17T22:44:01.638698+00:00 app[worker.1]: path: '/guilds/1086150687269847080/members/894143297050787850',\n2024-05-17T22:44:01.638698+00:00 app[worker.1]: code: 50013,\n2024-05-17T22:44:01.638698+00:00 app[worker.1]: httpStatus: 403\n2024-05-17T22:44:01.638698+00:00 app[worker.1]: }\n"})}),"\n",(0,s.jsx)(n.h3,{id:"crashed-on-heroku",children:"Crashed on Heroku"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"2024-05-16T04:45:28.045293+00:00 heroku[web.1]: Starting process with command `npm start`\n2024-05-16T04:45:29.006096+00:00 app[web.1]:\n2024-05-16T04:45:29.006148+00:00 app[web.1]: &gt; rxbot@1.0.0 start /app\n2024-05-16T04:45:29.006148+00:00 app[web.1]: &gt; node bot.js\n2024-05-16T04:45:29.006149+00:00 app[web.1]:\n2024-05-16T04:45:29.563611+00:00 app[web.1]: Logged in as RXBOT#4425\n2024-05-16T04:46:28.333745+00:00 heroku[web.1]: Error R10 (Boot timeout) -&gt; Web process failed to bind to $PORT within 60 seconds of launch\n2024-05-16T04:46:28.345690+00:00 heroku[web.1]: Stopping process with SIGKILL\n2024-05-16T04:46:28.449933+00:00 heroku[web.1]: Process exited with status 137\n2024-05-16T04:46:28.474043+00:00 heroku[web.1]: State changed from starting to crashed\n"})}),"\n",(0,s.jsxs)(n.p,{children:["solution: change dyno from ",(0,s.jsx)(n.code,{children:"web"})," dyno to ",(0,s.jsx)(n.code,{children:"worker"})," dyno"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"alt text",src:o(76438).A+"",width:"2444",height:"370"})}),"\n",(0,s.jsxs)(n.p,{children:["restart with heroku cli: ",(0,s.jsx)(n.code,{children:"heroku ps:scale worker=1 -a rxbot"})]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"2024-05-16T10:29:29.364100+00:00 heroku[web.1]: Error R10 (Boot timeout) -> Web process failed to bind to $PORT within 60 seconds of launch\n2024-05-16T10:29:29.376816+00:00 heroku[web.1]: Stopping process with SIGKILL\n2024-05-16T10:29:29.470658+00:00 heroku[web.1]: Process exited with status 137\n2024-05-16T10:29:29.499871+00:00 heroku[web.1]: State changed from starting to crashed\n2024-05-16T12:14:14.832513+00:00 app[api]: Scaled to web@0:Basic worker@0:Basic by user ron@cloudbuilder.io\n2024-05-16T12:14:14.933958+00:00 heroku[web.1]: State changed from crashed to down\n2024-05-16T12:14:21.653969+00:00 app[api]: Scaled to web@0:Basic worker@1:Basic by user ron@cloudbuilder.io\n2024-05-16T12:14:26.105195+00:00 heroku[worker.1]: Starting process with command `node bot.js`\n2024-05-16T12:14:27.035181+00:00 heroku[worker.1]: State changed from starting to up\n2024-05-16T12:14:28.600243+00:00 app[worker.1]: Logged in as RXBOT#4425\n"})})]})}function h(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(l,{...e})}):l(e)}},86663:(e,n,o)=>{o.d(n,{A:()=>r});const r=o.p+"assets/images/DiscordBotCamera-Demo2-4de6095a68e1b9b4894bef0d407ee195.png"}}]);