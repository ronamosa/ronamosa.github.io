"use strict";(self.webpackChunkronamosa_github_io=self.webpackChunkronamosa_github_io||[]).push([[90691],{10223:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-8-8a6f052d877eb92d9f229e220fac13c6.png"},15466:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-5-efce6e9924db8eb1687495d12fb545c4.png"},28453:(e,s,n)=>{n.d(s,{R:()=>i,x:()=>l});var o=n(96540);const t={},r=o.createContext(t);function i(e){const s=o.useContext(r);return o.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),o.createElement(r.Provider,{value:s},e.children)}},31027:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-4-f9d92e2f8702946e20e9dd25622b043c.png"},32940:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-10-9a74e5855ba1ce4028ebac442e2965d0.png"},33628:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-3-457bcfc8774e689794f890a39b44a109.png"},33756:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>i,metadata:()=>o,toc:()=>c});const o=JSON.parse('{"id":"engineer/AWS/eks-create-clusters","title":"AWS EKS Cluster Creation - Complete Guide to Kubernetes Cluster Setup","description":"Step-by-step guide to creating AWS EKS clusters including IAM permissions, VPC configuration, and cluster management. Learn EKS cluster deployment best practices.","source":"@site/docs/engineer/AWS/eks-create-clusters.md","sourceDirName":"engineer/AWS","slug":"/engineer/AWS/eks-create-clusters","permalink":"/docs/engineer/AWS/eks-create-clusters","draft":false,"unlisted":false,"editUrl":"https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/engineer/AWS/eks-create-clusters.md","tags":[{"inline":true,"label":"aws","permalink":"/docs/tags/aws"},{"inline":true,"label":"eks","permalink":"/docs/tags/eks"},{"inline":true,"label":"kubernetes","permalink":"/docs/tags/kubernetes"},{"inline":true,"label":"cluster-setup","permalink":"/docs/tags/cluster-setup"},{"inline":true,"label":"iam","permalink":"/docs/tags/iam"}],"version":"current","lastUpdatedBy":"Ron Amosa","lastUpdatedAt":1771617957000,"sidebarPosition":5,"frontMatter":{"title":"AWS EKS Cluster Creation - Complete Guide to Kubernetes Cluster Setup","description":"Step-by-step guide to creating AWS EKS clusters including IAM permissions, VPC configuration, and cluster management. Learn EKS cluster deployment best practices.","keywords":["aws eks cluster","kubernetes cluster creation","eks setup","k8s cluster deployment","aws kubernetes","eks permissions","cluster management"],"tags":["aws","eks","kubernetes","cluster-setup","iam"],"sidebar_position":5},"sidebar":"docsSidebar","previous":{"title":"AWS Security Incident Response Guide - Cloud Security and Forensics","permalink":"/docs/engineer/AWS/aws-incident-response"},"next":{"title":"Debugging AWS Amplify SSR: Unable to Assume IAM Role","permalink":"/docs/engineer/AWS/amplify-ssr-iam-debugging"}}');var t=n(74848),r=n(28453);const i={title:"AWS EKS Cluster Creation - Complete Guide to Kubernetes Cluster Setup",description:"Step-by-step guide to creating AWS EKS clusters including IAM permissions, VPC configuration, and cluster management. Learn EKS cluster deployment best practices.",keywords:["aws eks cluster","kubernetes cluster creation","eks setup","k8s cluster deployment","aws kubernetes","eks permissions","cluster management"],tags:["aws","eks","kubernetes","cluster-setup","iam"],sidebar_position:5},l=void 0,a={},c=[{value:"AWS Console",id:"aws-console",level:2},{value:"Pre-requisites",id:"pre-requisites",level:3},{value:"IAM Role - Cluster",id:"iam-role---cluster",level:3},{value:"IAM Role - Node Group",id:"iam-role---node-group",level:3},{value:"Create EKS Cluster",id:"create-eks-cluster",level:3},{value:"Create Node Groups",id:"create-node-groups",level:3},{value:"Setup kubeconfig",id:"setup-kubeconfig",level:3},{value:"AWS CLI",id:"aws-cli",level:2},{value:"VPC from cloudformation",id:"vpc-from-cloudformation",level:3},{value:"IAM Roles &amp; Cluster",id:"iam-roles--cluster",level:3},{value:"IAM Roles &amp; Nodes",id:"iam-roles--nodes",level:3},{value:"Create cluster using CLI",id:"create-cluster-using-cli",level:3},{value:"Create Node Group using CLI",id:"create-node-group-using-cli",level:3},{value:"Demo Application",id:"demo-application",level:2},{value:"Credits",id:"credits",level:2}];function d(e){const s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.admonition,{type:"tip",children:(0,t.jsxs)(s.p,{children:["IAM user needs following permissions: ",(0,t.jsx)(s.code,{children:"EKS"}),", ",(0,t.jsx)(s.code,{children:"IAM"}),", ",(0,t.jsx)(s.code,{children:"CloudFormation"}),", ",(0,t.jsx)(s.code,{children:"VPC"}),"."]})}),"\n",(0,t.jsx)(s.p,{children:"This document prescribes how to create an AWS EKS Cluster using the AWS console, and AWS cli too."}),"\n",(0,t.jsx)(s.p,{children:"An EKS cluster is basically setup in TWO parts: the Cluster part (IAM and create control plane), the managed Node part (IAM and create managed nodes)."}),"\n",(0,t.jsx)(s.h2,{id:"aws-console",children:"AWS Console"}),"\n",(0,t.jsx)(s.admonition,{title:"Documentation",type:"note",children:(0,t.jsxs)(s.p,{children:["Reference: ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/create-cluster.html",children:"EKS User Guide: Create Cluster"})]})}),"\n",(0,t.jsx)(s.h3,{id:"pre-requisites",children:"Pre-requisites"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsx)(s.li,{children:"VPC"}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"aws cli"})}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.code,{children:"kubectl"})," i.e. ",(0,t.jsx)(s.code,{children:"curl -O https://s3.us-west-2.amazonaws.com/amazon-eks/1.27.1/2023-04-19/bin/linux/amd64/kubectl"})," for Linux"]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["(optional) ",(0,t.jsx)(s.a,{href:"https://eksctl.io/introduction/#installation",children:"install eksctl"})]}),"\n",(0,t.jsx)(s.p,{children:"For Linux users (obvs):"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# for ARM systems, set ARCH to: `arm64`, `armv6` or `armv7`\nARCH=amd64\nPLATFORM=$(uname -s)_$ARCH\n\ncurl -sLO "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_$PLATFORM.tar.gz"\n\n# (Optional) Verify checksum\ncurl -sL "https://github.com/eksctl-io/eksctl/releases/latest/download/eksctl_checksums.txt" | grep $PLATFORM | sha256sum --check\n\ntar -xzf eksctl_$PLATFORM.tar.gz -C /tmp && rm eksctl_$PLATFORM.tar.gz\n\nsudo mv /tmp/eksctl /usr/local/bin\n'})}),"\n",(0,t.jsx)(s.p,{children:"You need to set a few things up first before you create your EKS Cluster, and Node Groups."}),"\n",(0,t.jsxs)(s.p,{children:["First, you need a EKS compatible ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/creating-a-vpc.html",children:"VPC"})," via ",(0,t.jsx)(s.strong,{children:"CloudFormation"}),"."]}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Go to ",(0,t.jsx)(s.a,{href:"https://console.aws.amazon.com/cloudformation/",children:"https://console.aws.amazon.com/cloudformation/"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Create stack:","\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"Template is ready"}),"\n",(0,t.jsxs)(s.li,{children:["Amazon S3 URL = ",(0,t.jsx)(s.code,{children:"https://s3.us-west-2.amazonaws.com/amazon-eks/cloudformation/2020-10-29/amazon-eks-vpc-private-subnets.yaml"})," (creates public & private subnet VPC)"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Click through until ",(0,t.jsx)(s.code,{children:"Submit"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"You have a VPC - private subs for Nodes, public subs for LBs to Nodes."}),"\n",(0,t.jsx)(s.p,{children:"Now you need to create TWO IAM Roles."}),"\n",(0,t.jsx)(s.h3,{id:"iam-role---cluster",children:"IAM Role - Cluster"}),"\n",(0,t.jsx)(s.p,{children:"This is the IAM Role for EKS to use to work with the cluster."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Go to ",(0,t.jsx)(s.a,{href:"https://us-east-1.console.aws.amazon.com/iamv2/home",children:"https://us-east-1.console.aws.amazon.com/iamv2/home"})]}),"\n",(0,t.jsx)(s.li,{children:"Create Role,"}),"\n",(0,t.jsxs)(s.li,{children:["Trusted entity type: ",(0,t.jsx)(s.code,{children:"AWS Service"})]}),"\n",(0,t.jsx)(s.li,{children:"Use case: EKS, EKS - Cluster"}),"\n",(0,t.jsxs)(s.li,{children:["Add Permissions: ",(0,t.jsx)(s.code,{children:"AmazonEKSClusterPolicy"})]}),"\n",(0,t.jsxs)(s.li,{children:["Role name: ",(0,t.jsx)(s.code,{children:"AmazonEKSClusterRole"})]}),"\n",(0,t.jsx)(s.li,{children:"Check Select trusted entities looks like this:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n    "Version": "2012-10-17",\n    "Statement": [\n        {\n            "Effect": "Allow",\n            "Principal": {\n                "Service": [\n                    "eks.amazonaws.com"\n                ]\n            },\n            "Action": "sts:AssumeRole"\n        }\n    ]\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"Done."}),"\n",(0,t.jsx)(s.h3,{id:"iam-role---node-group",children:"IAM Role - Node Group"}),"\n",(0,t.jsx)(s.admonition,{title:"Documentation",type:"note",children:(0,t.jsxs)(s.p,{children:["Reference: ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/create-node-role.html",children:"EKS User Guide: Create Node Role"})]})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Go to ",(0,t.jsx)(s.a,{href:"https://us-east-1.console.aws.amazon.com/iamv2/home",children:"https://us-east-1.console.aws.amazon.com/iamv2/home"})]}),"\n",(0,t.jsxs)(s.li,{children:["Create a new role name ",(0,t.jsx)(s.code,{children:"AmazonEKSNodeGroupRole"}),"."]}),"\n",(0,t.jsxs)(s.li,{children:["Find & Attach the following policies:","\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"AmazonEKSWorkerNodePolicy"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"AmazonEC2ContainerRegistryReadOnly"})}),"\n",(0,t.jsx)(s.li,{children:(0,t.jsx)(s.code,{children:"AmazonEKS_CNI_Policy"})}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"create-eks-cluster",children:"Create EKS Cluster"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["go to ",(0,t.jsx)(s.a,{href:"https://ap-southeast-2.console.aws.amazon.com/eks/home?region=ap-southeast-2#/cluster-create",children:"https://ap-southeast-2.console.aws.amazon.com/eks/home?region=ap-southeast-2#/cluster-create"})]}),"\n",(0,t.jsx)(s.li,{children:"create a cluster"}),"\n",(0,t.jsxs)(s.li,{children:["add Name, Kubernetes version, select cluster role ",(0,t.jsx)(s.code,{children:"AmazonEKSClusterRole"})," ",(0,t.jsx)(s.img,{alt:"create cluster",src:n(58062).A+"",width:"817",height:"485"})]}),"\n",(0,t.jsxs)(s.li,{children:["Next, select the VPC from the pre-reqs, created by cloudformation ",(0,t.jsx)(s.img,{alt:"cluster networking",src:n(85893).A+"",width:"842",height:"839"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"select ALL subnets."}),"\n",(0,t.jsx)(s.li,{children:"select Security Group from the VPC created by cloudformation."}),"\n",(0,t.jsxs)(s.li,{children:['cluster endpoint access = "Public and private" ',(0,t.jsx)(s.img,{alt:"cluster endpoint",src:n(33628).A+"",width:"823",height:"349"})]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(s.li,{children:["Next, Add-ons you should see ",(0,t.jsx)(s.img,{alt:"cluster add-ons",src:n(31027).A+"",width:"833",height:"647"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"kube-proxy"}),"\n",(0,t.jsx)(s.li,{children:"CoreDNS"}),"\n",(0,t.jsx)(s.li,{children:"Amazon VPC CNI"}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(s.li,{children:"Next, Next, Create."}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"Wait for your cluster to become active, then onto creating the node groups (data plane)."}),"\n",(0,t.jsx)(s.h3,{id:"create-node-groups",children:"Create Node Groups"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"go to your cluster"}),"\n",(0,t.jsxs)(s.li,{children:["go to ",(0,t.jsx)(s.code,{children:"Compute"})]}),"\n",(0,t.jsxs)(s.li,{children:["go down to ",(0,t.jsx)(s.code,{children:"Node groups"})," and click ",(0,t.jsx)(s.code,{children:"Add node group"})," ",(0,t.jsx)(s.img,{alt:"node group",src:n(15466).A+"",width:"1540",height:"601"})]}),"\n",(0,t.jsxs)(s.li,{children:["create a name, and select the ",(0,t.jsx)(s.code,{children:"AmazonEKSNodeGroupRole"})," for Node IAM role. ",(0,t.jsx)(s.img,{alt:"node group role",src:n(56545).A+"",width:"807",height:"429"})]}),"\n",(0,t.jsx)(s.li,{children:"Next, choose your AMI and instance settings."}),"\n",(0,t.jsxs)(s.li,{children:["Next, because we have both public & private subnets, de-select public subnets we are deploying Nodes to private subnets only. ",(0,t.jsx)(s.img,{alt:"node networking",src:n(10223).A+"",width:"823",height:"467"})]}),"\n",(0,t.jsxs)(s.li,{children:["Next, ",(0,t.jsx)(s.strong,{children:"Create"}),"."]}),"\n"]}),"\n",(0,t.jsxs)(s.p,{children:["When your nodes are ready in EC2, you'll see them and the Node group ready here: ",(0,t.jsx)(s.img,{alt:"node group",src:n(45030).A+"",width:"1524",height:"528"})]}),"\n",(0,t.jsx)(s.h3,{id:"setup-kubeconfig",children:"Setup kubeconfig"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["configure your ",(0,t.jsx)(s.code,{children:"aws cli"})," with access key, secret for your user."]}),"\n",(0,t.jsxs)(s.li,{children:["run ",(0,t.jsx)(s.code,{children:"aws eks update-kubeconfig --region region-code --name my-cluster"})," i.e. ",(0,t.jsx)(s.code,{children:"aws eks update-kubeconfig --region ap-southeast-2 --name astro-test-cluster"})," ",(0,t.jsx)(s.img,{alt:"kubeconfig",src:n(32940).A+"",width:"904",height:"59"})]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"and voila, you have a running and cli-accessible EKS cluster:"}),"\n",(0,t.jsx)(s.p,{children:(0,t.jsx)(s.img,{alt:"EKS cluster",src:n(68853).A+"",width:"782",height:"96"})}),"\n",(0,t.jsx)(s.h2,{id:"aws-cli",children:"AWS CLI"}),"\n",(0,t.jsxs)(s.p,{children:["The quick version of running everything from the ",(0,t.jsx)(s.code,{children:"aws cli"}),", you can choose to install via ",(0,t.jsx)(s.a,{href:"https://docs.aws.amazon.com/eks/latest/userguide/eksctl.html",children:"eksctl"})," that's another option."]}),"\n",(0,t.jsx)(s.p,{children:"I assume you have the prerequisites installed, so we'll just run over the commands for each section covered in the console version."}),"\n",(0,t.jsx)(s.h3,{id:"vpc-from-cloudformation",children:"VPC from cloudformation"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws cloudformation create-stack \\\n  --region region-code \\\n  --stack-name my-eks-vpc-stack \\\n  --template-url https://s3.us-west-2.amazonaws.com/amazon-eks/cloudformation/2020-10-29/amazon-eks-vpc-private-subnets.yaml\n"})}),"\n",(0,t.jsx)(s.h3,{id:"iam-roles--cluster",children:"IAM Roles & Cluster"}),"\n",(0,t.jsx)(s.p,{children:"Create JSON with the EKS trust policy:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'cat >eks-cluster-role-trust-policy.json <<EOF\n{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "Service": "eks.amazonaws.com"\n      },\n      "Action": "sts:AssumeRole"\n    }\n  ]\n}\nEOF\n'})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["create ",(0,t.jsx)(s.code,{children:"AmazonEKSClusterRole"})," by running command: ",(0,t.jsx)(s.code,{children:'aws iam create-role --role-name AmazonEKSClusterRole --assume-role-policy-document file://"eks-cluster-role-trust-policy.json"'})]}),"\n",(0,t.jsxs)(s.li,{children:["attach policy : ",(0,t.jsx)(s.code,{children:"aws iam attach-role-policy --policy-arn arn:aws:iam::aws:policy/AmazonEKSClusterPolicy --role-name AmazonEKSClusterRole"})]}),"\n"]}),"\n",(0,t.jsx)(s.h3,{id:"iam-roles--nodes",children:"IAM Roles & Nodes"}),"\n",(0,t.jsx)(s.p,{children:"This is the node role trust policy:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "Version": "2012-10-17",\n  "Statement": [\n    {\n      "Effect": "Allow",\n      "Principal": {\n        "Service": "ec2.amazonaws.com"\n      },\n      "Action": "sts:AssumeRole"\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["create ",(0,t.jsx)(s.code,{children:"AmazonEKSNodeGroupRoles"})," by running command: ",(0,t.jsx)(s.code,{children:'aws iam create-role --role-name AmazonEKSNodeGroupRole --assume-role-policy-document file://"node-role-trust-policy.json"'})]}),"\n",(0,t.jsx)(s.li,{children:"attach the 3 x policies:"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws iam attach-role-policy \\\n  --policy-arn arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy \\\n  --role-name AmazonEKSNodeGroupRole\naws iam attach-role-policy \\\n  --policy-arn arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly \\\n  --role-name AmazonEKSNodeGroupRole\naws iam attach-role-policy \\\n  --policy-arn arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy \\\n  --role-name AmazonEKSNodeGroupRole\n"})}),"\n",(0,t.jsx)(s.h3,{id:"create-cluster-using-cli",children:"Create cluster using CLI"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws eks create-cluster --region region-code --name demo-cluster --kubernetes-version 1.27 \\\n   --role-arn arn:aws:iam::111122223333:role/AmazonEKSClusterRole \\\n   --resources-vpc-config subnetIds=subnet-ExampleID1,subnet-ExampleID2,securityGroupIds=sg-ExampleID1\n"})}),"\n",(0,t.jsx)(s.p,{children:"some aws cli commands to grab these details:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"# IAM Role ARN\naws iam get-role --role-name AmazonEKSClusterRole --query 'Role.Arn'\n\n# VPC Subnets\naws ec2 describe-subnets --filters \"Name=vpc-id,Values=vpc-068959db5aa05a1bb\" --query 'Subnets[*].SubnetId'\n\n# Security Group based VPC id\naws ec2 describe-security-groups --filters \"Name=vpc-id,Values=<VPC-ID />\"\n"})}),"\n",(0,t.jsx)(s.h3,{id:"create-node-group-using-cli",children:"Create Node Group using CLI"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws eks create-nodegroup \\\n  --cluster-name <CLUSTER-NAME /> \\\n  --nodegroup-name <NODEGROUP-NAME /> \\\n  --subnets <SUBNET-ID1 /> <SUBNET-ID2 /> \\\n  --node-role <NODE-ROLE-ARN /> \\\n  --ami-type <AMI-TYPE /> \\\n  --scaling-config minSize=<MIN-SIZE />,maxSize=<MAX-SIZE />,desiredSize=<DESIRED-SIZE />\n"})}),"\n",(0,t.jsx)(s.p,{children:"e.g."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"aws eks create-nodegroup \\\n  --cluster-name demo-cluster \\\n  --nodegroup-name demo-ng \\\n  --subnets subnet-080e38b1842fc3c2d subnet-0cc6119f1dd9f1657 \\\n  --node-role arn:aws:iam::1111111111111:role/AmazonEKSNodeGroupRole \\\n  --ami-type AL2_x86_64 \\\n  --scaling-config minSize=2,maxSize=2,desiredSize=2\n"})}),"\n",(0,t.jsx)(s.p,{children:"use some commands from above to grab some details"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:'# EKS optimised AMI id\'s\naws ssm get-parameter --name /aws/service/eks/optimized-ami/1.27/amazon-linux-2/recommended/image_id --region ap-southeast-2 --query "Parameter.Value" --output text\n'})}),"\n",(0,t.jsx)(s.p,{children:"Get your kubeconfig setup:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"`aws eks update-kubeconfig --region region-code --name my-cluster` i.e. `aws eks update-kubeconfig --region ap-southeast-2 --name demo-cluster`\n"})}),"\n",(0,t.jsx)(s.h2,{id:"demo-application",children:"Demo Application"}),"\n",(0,t.jsxs)(s.p,{children:["Deploy the ",(0,t.jsx)(s.a,{href:"https://github.com/aws-containers/retail-store-sample-app",children:"AWS Retail Store App"}),"."]}),"\n",(0,t.jsx)(s.h2,{id:"credits",children:"Credits"}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:["big s/o to Kavitha Suresh Kumar ",(0,t.jsx)(s.a,{href:"https://www.youtube.com/watch?v=KxxgF-DAGWc&ab_channel=KavithaSureshKumar",children:"video"})," for a great video that quickly cuts through the process."]}),"\n",(0,t.jsx)(s.li,{children:"AWS Documentation as noted above."}),"\n"]})]})}function u(e={}){const{wrapper:s}={...(0,r.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},45030:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-9-e7b5d8d1d64cb4f849f383e514b27d86.png"},56545:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-6-036a13f3cdb5cbdb8d9e067eefaba450.png"},58062:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-1-d4d4396a6bc59f9ab151cf628045789f.png"},68853:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-11-2e5b71e3850f36809017467235d8c177.png"},85893:(e,s,n)=>{n.d(s,{A:()=>o});const o=n.p+"assets/images/aws-eks-2-91240ee3ca3a4311ee0c988de91c4805.png"}}]);