"use strict";(self.webpackChunkronamosa_github_io=self.webpackChunkronamosa_github_io||[]).push([[31477],{28453:(e,t,s)=>{s.d(t,{R:()=>r,x:()=>a});var i=s(96540);const n={},o=i.createContext(n);function r(e){const t=i.useContext(o);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function a(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(o.Provider,{value:t},e.children)}},88772:(e,t,s)=>{s.r(t),s.d(t,{assets:()=>d,contentTitle:()=>a,default:()=>c,frontMatter:()=>r,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"archive/2017-09-14-Reset_Win10_Passwd_Vmware_Guest","title":"Reset Windows10 VMWare Guest Password.","description":"After installing a few windows 10 vm\'s on my ESXi lab, I, of course, forgot the admin passwords I used to set them up. Normally this is a bootable USB with some SAM file editing tools on it, but this is virtual hardware land. The following procedure worked to get me into the virtual BIOS of my vm.","source":"@site/docs/archive/2017-09-14-Reset_Win10_Passwd_Vmware_Guest.md","sourceDirName":"archive","slug":"/archive/2017-09-14-Reset_Win10_Passwd_Vmware_Guest","permalink":"/docs/archive/2017-09-14-Reset_Win10_Passwd_Vmware_Guest","draft":false,"unlisted":false,"editUrl":"https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/archive/2017-09-14-Reset_Win10_Passwd_Vmware_Guest.md","tags":[],"version":"current","lastUpdatedBy":"Ron Amosa","lastUpdatedAt":1771617957000,"frontMatter":{"title":"Reset Windows10 VMWare Guest Password."},"sidebar":"docsSidebar","previous":{"title":"RDP to a Azure AD Joined Device","permalink":"/docs/archive/2017-09-12-Windows10Pro-RDP-AzureADJoined"},"next":{"title":"Docker Private Registry 2.0","permalink":"/docs/archive/2017-10-13-Docker_Private_Registry_v2.0"}}');var n=s(74848),o=s(28453);const r={title:"Reset Windows10 VMWare Guest Password."},a=void 0,d={},l=[{value:"Summary",id:"summary",level:2},{value:"Get into the VM Bios",id:"get-into-the-vm-bios",level:2},{value:"Password Reset Steps",id:"password-reset-steps",level:2},{value:"Why your Windows is hibernated",id:"why-your-windows-is-hibernated",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"References",id:"references",level:2}];function h(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"After installing a few windows 10 vm's on my ESXi lab, I, of course, forgot the admin passwords I used to set them up. Normally this is a bootable USB with some SAM file editing tools on it, but this is virtual hardware land. The following procedure worked to get me into the virtual BIOS of my vm."}),"\n",(0,n.jsx)(t.h2,{id:"summary",children:"Summary"}),"\n",(0,n.jsx)(t.p,{children:"Unfortunately, the actual password resetting bit didn't work for reasons stated below. I'll come back to this post once I have time to figure that bit out."}),"\n",(0,n.jsx)(t.h2,{id:"get-into-the-vm-bios",children:"Get into the VM Bios"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"Find the .vmx file for the vm you want to get into the bios, this is in your esxi hosts vm  directory."}),"\n",(0,n.jsx)(t.li,{children:"Copy the .vmx file to your local desktop and edit it with a text editor like Notepad++"}),"\n",(0,n.jsxs)(t.li,{children:["Edit this file and enter this information on the first line: ",(0,n.jsx)(t.code,{children:"bios.forceSetupOnce = \u201cTRUE\u201d"})]}),"\n",(0,n.jsx)(t.li,{children:"Save and quit your editor"}),"\n",(0,n.jsx)(t.li,{children:"Next download the Offline NT & Password Registry Editor from here (upload password registry editor iso to your esxi datastore)"}),"\n",(0,n.jsx)(t.li,{children:"With you VMMachine shut down, start it and attach the ISO image that was unzipped from your download."}),"\n",(0,n.jsx)(t.li,{children:"When your VM Instance Boots, you will be in the BIOS. Change the BIOS settings so that your VM Image first boots from the CDROM. Then Save and Exit changes"}),"\n",(0,n.jsx)(t.li,{children:"Reboot your VM image"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"password-reset-steps",children:"Password Reset Steps"}),"\n",(0,n.jsxs)(t.ol,{children:["\n",(0,n.jsx)(t.li,{children:"A CLI (Command Line Interface) will appear."}),"\n",(0,n.jsx)(t.li,{children:"Follow the steps outlined HERE. Pretty much take the defaults by simply pressing return."}),"\n"]}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:'windows 8/8.1/10 have features means this password tool will fail due to NTFS filesystem being in "hibernation mode" and this tool can\'t proceed.'}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.strong,{children:"you'll get this error:"})}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-log",children:'"Mounting from /dev/sda5 with filesystem type NTFS\nSo let\'s really check if it is NTFS?\n\nWindows is hibernated, refused to mount.\nNTFS: Yes, but hibernated.\n=================================\n** The system is HIBERNATED!\n** SAFEST is to boot into windows and shut down properly!\n=================================\n\nIf that is not possible, you can force changes,\nbut the hibernated session will be lost!"\n'})}),"\n",(0,n.jsx)(t.p,{children:"so what's the problem?"}),"\n",(0,n.jsx)(t.h2,{id:"why-your-windows-is-hibernated",children:"Why your Windows is hibernated"}),"\n",(0,n.jsx)(t.p,{children:'There is a new feature in Windows 8/10 called Fast Startup. If this feature is enabled (which it is by default), Windows does not actually completely shutdown when you choose shutdown. Instead, it does a "hybrid shutdown". This is something like hibernating; it makes booting Windows back up faster. So, you need to disable this feature to be able to shut it down properly, and be able to mount the Windows partitions.'}),"\n",(0,n.jsx)(t.p,{children:(0,n.jsx)(t.a,{href:"https://www.top-password.com/knowledge/chntpw-refused-to-mount-hibernated-windows.html",children:"hibernation mode issue"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Eventually you will see a list of system user accounts. Select the user you want to clear the password and clear (delete) that password."}),"\n",(0,n.jsx)(t.li,{children:"Save quit and shutdown you VM image."}),"\n",(0,n.jsx)(t.li,{children:"Edit the .vmx file again and change:"}),"\n"]}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ini",children:"bios.forceSetupOnce = \u201cTRUE\u201d\n"})}),"\n",(0,n.jsx)(t.p,{children:"to"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-ini",children:"bios.forceSetupOnce = \u201cFALSE\u201d\n"})}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"Save your changes and exit your editor"}),"\n",(0,n.jsx)(t.li,{children:"Reboot"}),"\n",(0,n.jsx)(t.li,{children:"Login and you're done."}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,n.jsx)(t.p,{children:"If bios fails to load and it keeps booting into the OS, check the .vmx file entry you entered is as it should be. I edited the file with an old version of 'vi' ssh'd into esxi 5.5's busybox (BusyBox v1.20.2 (2012-12-11 11:54:28 PST)) and my vi edits were getting munged."}),"\n",(0,n.jsx)(t.h2,{id:"references",children:"References"}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"https://communities.vmware.com/thread/202039",children:"VMWare Thread"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"http://www.pogostick.net/~pnh/ntpasswd/",children:"Password Reset Tool"})}),"\n",(0,n.jsx)(t.li,{children:(0,n.jsx)(t.a,{href:"http://www.pogostick.net/~pnh/ntpasswd/walkthrough.html",children:"Password Reset HowTo"})}),"\n"]})})]})}function c(e={}){const{wrapper:t}={...(0,o.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(h,{...e})}):h(e)}}}]);