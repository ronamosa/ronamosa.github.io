"use strict";(self.webpackChunkronamosa_github_io=self.webpackChunkronamosa_github_io||[]).push([[5286],{28453:(e,n,o)=>{o.d(n,{R:()=>s,x:()=>a});var t=o(96540);const i={},r=t.createContext(i);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:s(e.components),t.createElement(r.Provider,{value:n},e.children)}},79796:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>d,contentTitle:()=>a,default:()=>h,frontMatter:()=>s,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"archive/2016-03-18-First-Config_CISCO-ASA5505","title":"Initializing a CISCO ASA 5505","description":"I needed a more reliable VPN solution to a remote site I need to work on every now and then. At the time I had setup the remote sites router to push VPN connections through to the Windows 2003 Server (I know, I know) and it would handle the VPN connection. From there I\'d RDP to other desktops as needed. Now, when the server would crash and be M.I.A. for whatever reason, I\'d be without a VPN connection and would then have to drive to the site to do anything.","source":"@site/docs/archive/2016-03-18-First-Config_CISCO-ASA5505.md","sourceDirName":"archive","slug":"/archive/2016-03-18-First-Config_CISCO-ASA5505","permalink":"/docs/archive/2016-03-18-First-Config_CISCO-ASA5505","draft":false,"unlisted":false,"editUrl":"https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/archive/2016-03-18-First-Config_CISCO-ASA5505.md","tags":[],"version":"current","lastUpdatedBy":"Ron Amosa","lastUpdatedAt":1771617957000,"frontMatter":{"title":"Initializing a CISCO ASA 5505"},"sidebar":"docsSidebar","previous":{"title":"Setting up a CISCO ASA 5505 VLAN & VPN","permalink":"/docs/archive/2016-03-01-CISCO-ASA-VLAN-SETUP"},"next":{"title":"Docker Trusted Registry (private) 1.0","permalink":"/docs/archive/2017-01-20-Docker-Private-Registry_v1.0"}}');var i=o(74848),r=o(28453);const s={title:"Initializing a CISCO ASA 5505"},a=void 0,d={},c=[{value:"Reset the device / Reset passwords",id:"reset-the-device--reset-passwords",level:3},{value:"run &#39;confreg&#39;",id:"run-confreg",level:3},{value:"Reload ASA",id:"reload-asa",level:3},{value:"Load and edit",id:"load-and-edit",level:3},{value:"Reload edited config",id:"reload-edited-config",level:3},{value:"Save your now running-config",id:"save-your-now-running-config",level:3},{value:"Reboot with <code>reload</code>",id:"reboot-with-reload",level:3},{value:"References",id:"references",level:3}];function l(e){const n={a:"a",admonition:"admonition",code:"code",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"I needed a more reliable VPN solution to a remote site I need to work on every now and then. At the time I had setup the remote sites router to push VPN connections through to the Windows 2003 Server (I know, I know) and it would handle the VPN connection. From there I'd RDP to other desktops as needed. Now, when the server would crash and be M.I.A. for whatever reason, I'd be without a VPN connection and would then have to drive to the site to do anything."}),"\n",(0,i.jsx)(n.p,{children:"Long story short, I came across an ASA 5505 and saw the words VPN associated with it and now I'm setting one up to basically be a VPN point at the remote site, can then hit other desktops from the edge of the network rather than rely on the server to be available for the WHOLE network to be available."}),"\n",(0,i.jsx)(n.h3,{id:"reset-the-device--reset-passwords",children:"Reset the device / Reset passwords"}),"\n",(0,i.jsx)(n.p,{children:"I got the device second hand so needed to"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"get into it without the password"}),"\n",(0,i.jsx)(n.li,{children:"reset the device."}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:"Plug your serial console cable in (the ligt blue one) and power up your device."}),"\n",(0,i.jsx)(n.p,{children:"You need it to interrupt the bootup and drop it into a 'rmmon' shell as per the instructions 'Use BREAK or ESC to interrupt boot.'"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"CISCO SYSTEMS\nEmbedded BIOS Version 1.0(12)11 04/30/08 15:45:41.19\n\nLow Memory: 632 KB\nHigh Memory: 251 MB\nPCI Device Table.\nBus Dev Func VendID DevID Class              Irq\n 00  01  00   1022   2080  Host Bridge\n 00  01  02   1022   2082  Chipset En/Decrypt 11\n 00  0C  00   1148   4320  Ethernet           11\n 00  0D  00   177D   0003  Network En/Decrypt 10\n 00  0F  00   1022   2090  ISA Bridge\n 00  0F  02   1022   2092  IDE Controller\n 00  0F  03   1022   2093  Audio              10\n 00  0F  04   1022   2094  Serial Bus         9\n 00  0F  05   1022   2095  Serial Bus         9\n\nEvaluating BIOS Options ...\nLaunch BIOS Extension to setup ROMMON\n\nCisco Systems ROMMON Version (1.0(12)11) #4: Thu May  1 14:50:05 PDT 2008\n\nPlatform ASA5505\n\nUse BREAK or ESC to interrupt boot.\nUse SPACE to begin boot immediately.\nBoot interrupted.\n\nEthernet0/0\nMAC Address: 0024.14a1.abe7\nLink is DOWN\n\nUse ? for help.\nrommon #0>\n"})}),"\n",(0,i.jsx)(n.h3,{id:"run-confreg",children:"run 'confreg'"}),"\n",(0,i.jsx)(n.p,{children:"to change configuration register and bypass login/security"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rommon #0> confreg\n\nCurrent Configuration Register: 0x00000001\nConfiguration Summary:\n  boot default image from Flash\n\nDo you wish to change this configuration? y/n [n]: y\nenable boot to ROMMON prompt? y/n [n]:\nenable TFTP netboot? y/n [n]:\nenable Flash boot? y/n [n]:\nselect specific Flash image index? y/n [n]:\ndisable system configuration? y/n [n]: y\ngo to ROMMON prompt if netboot fails? y/n [n]:\nenable passing NVRAM file specs in auto-boot mode? y/n [n]:\ndisable display of BREAK or ESC key prompt during auto-boot? y/n [n]:\n\nCurrent Configuration Register: 0x00000040\nConfiguration Summary:\n  boot ROMMON\n  ignore system configuration\n\nUpdate Config Register (0x40) in NVRAM...\n"})}),"\n",(0,i.jsx)(n.p,{children:"take note the 'Current Configuration Register' at the start is '0x00000001', after you run through the configuration change, you'll notice its changed to '0x00000040'"}),"\n",(0,i.jsx)(n.h3,{id:"reload-asa",children:"Reload ASA"}),"\n",(0,i.jsx)(n.p,{children:"now reload the ASA with a 'boot' command at the prompt"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"rommon #1> boot\nLaunching BootLoader...\nBoot configuration file contains 1 entry.\n\n\nLoading disk0:/asa803-k8.bin... Booting...\nLoading...\n"})}),"\n",(0,i.jsx)(n.h3,{id:"load-and-edit",children:"Load and edit"}),"\n",(0,i.jsx)(n.p,{children:"the new config and setup new credentials"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["run ",(0,i.jsx)(n.code,{children:"enable"})," to get privileged mode (password should be blank, just press enter)"]}),"\n",(0,i.jsxs)(n.li,{children:["load the start-up config into memory with ",(0,i.jsx)(n.code,{children:"copy startup-config running-config"})]}),"\n",(0,i.jsxs)(n.li,{children:["get into config mode ",(0,i.jsx)(n.code,{children:"conf t"})," to edit the default configuration"]}),"\n",(0,i.jsx)(n.li,{children:"setup your login credentials"}),"\n"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ciscoasa(config)# password <password />\nciscoasa(config)# enable password <password />\nciscoasa(config)# username <name /> password <password />\n"})}),"\n",(0,i.jsx)(n.h3,{id:"reload-edited-config",children:"Reload edited config"}),"\n",(0,i.jsx)(n.p,{children:"you can now reload your newly edited default configuration"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ciscoasa(config)# no config-register\n"})}),"\n",(0,i.jsx)(n.h3,{id:"save-your-now-running-config",children:"Save your now running-config"}),"\n",(0,i.jsx)(n.p,{children:"back to the startup-config to persist (i.e. come back after) for reboots"}),"\n",(0,i.jsx)(n.p,{children:"this ensures it boots with your new settings"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"ciscoasa(config)# copy running-config startup-config\n"})}),"\n",(0,i.jsxs)(n.h3,{id:"reboot-with-reload",children:["Reboot with ",(0,i.jsx)(n.code,{children:"reload"})]}),"\n",(0,i.jsx)(n.p,{children:"watch it boot right back up with all your new settings."}),"\n",(0,i.jsx)(n.h3,{id:"references",children:"References"}),"\n",(0,i.jsx)(n.admonition,{type:"info",children:(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"http://www.cisco.com/c/en/us/td/docs/security/asa/asa83/configuration/guide/config/admin_trouble.html#wp1134357",children:"CISCO ASA Configuration Reference"})}),"\n"]})})]})}function h(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(l,{...e})}):l(e)}}}]);