<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-engineer/LAB/proxmox-lvm-mount" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Mount Proxmox VM Logical Volumes for Direct Filesystem Access | The Uncommon Engineer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://ronamosa.io/docs/engineer/LAB/proxmox-lvm-mount"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Mount Proxmox VM Logical Volumes for Direct Filesystem Access | The Uncommon Engineer"><meta data-rh="true" name="description" content="Technical guide to mount and access Proxmox virtual machine logical volumes from the host system for troubleshooting, recovery, and filesystem modifications."><meta data-rh="true" property="og:description" content="Technical guide to mount and access Proxmox virtual machine logical volumes from the host system for troubleshooting, recovery, and filesystem modifications."><meta data-rh="true" name="keywords" content="proxmox,lvm,logical volume,vm mount,filesystem access,vm recovery,proxmox troubleshooting,vm disk access"><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://ronamosa.io/docs/engineer/LAB/proxmox-lvm-mount"><link data-rh="true" rel="alternate" href="https://ronamosa.io/docs/engineer/LAB/proxmox-lvm-mount" hreflang="en"><link data-rh="true" rel="alternate" href="https://ronamosa.io/docs/engineer/LAB/proxmox-lvm-mount" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9UFF3RBJQ9-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"💻 Engineer","item":"https://ronamosa.io/docs/category/-engineer"},{"@type":"ListItem","position":2,"name":"Mount Proxmox VM Logical Volumes for Direct Filesystem Access","item":"https://ronamosa.io/docs/engineer/LAB/proxmox-lvm-mount"}]}</script><link rel="search" type="application/opensearchdescription+xml" title="The Uncommon Engineer" href="/opensearch.xml">
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMRNTVGLRC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DMRNTVGLRC",{anonymize_ip:!0})</script>

<script src="/js/console-clue.js"></script>
<script src="/js/metricool.js"></script><link rel="stylesheet" href="/assets/css/styles.dd12b5e8.css">
<script src="/assets/js/runtime~main.cb34a51e.js" defer="defer"></script>
<script src="/assets/js/main.fb1c5b66.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="ronamosa.io" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="ronamosa.io" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Uncommon Engineer</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Docs</a><a class="navbar__item navbar__link" href="/blog/">Blog</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/projects/">Projects</a><a class="navbar__item navbar__link" href="/changelog/">Changelog</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">▶ Start Here</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/books/reading-list">📚 Books &amp; Papers</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/study/SCS-C01/">📗 Study</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/️-hacker">🏴‍☠️ Hacker</a><button aria-label="Expand sidebar category &#x27;🏴‍☠️ Hacker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/docs/category/-engineer">💻 Engineer</a><button aria-label="Collapse sidebar category &#x27;💻 Engineer&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/ai">AI</a><button aria-label="Expand sidebar category &#x27;AI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/docs/category/️-projects">🛠️ Projects</a><button aria-label="Expand sidebar category &#x27;🛠️ Projects&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/engineer/AWS/AWS-EKS-Workshop">AWS</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/engineer/Azure/2019-07-20-Sonarqube-AzureDisk-PersistentVolume">Azure</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/engineer/GCP/2019-11-27-GCP-Install-Ambassador-Helm2">GCP</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/engineer/K8s/2019-11-11-Helm-3-Kubernetes-Package-Manager">K8s</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/engineer/LAB">LAB</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB">Home Lab Infrastructure Hub: Complete Setup &amp; Automation Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/proxmox-hub">Proxmox Virtualization Hub: Complete Guide Collection</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/pihole-dns">Pi-hole DNS Setup - Network-wide Ad Blocking and DNS Filtering</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/proxmox-packer-vm">Create Cloud-Init VM Templates with Packer on Proxmox</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/proxmox-cloudinit">Automate Proxmox VM Deployment with Ansible Cloud-Init Playbooks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/streamdeck-linux">Stream Deck XL Linux Setup - Complete Configuration Guide for Ubuntu</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/Terminal">Ultimate Linux Terminal Setup - Oh My Zsh, Powerlevel10k, and Productivity Tools</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/engineer/LAB/proxmox-lvm-mount">Mount Proxmox VM Logical Volumes for Direct Filesystem Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/pihole-docker-unbound">Pi-hole with Unbound DNS: Complete Docker Setup for Privacy &amp; Ad-Blocking</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/setup-cursorai-appimage-gnome">How to Set Up CursorAI AppImage on GNOME Desktop (Linux)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/pihole-compromise">Pihole Checking for Compromise</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/fixing-pihole-unbound-servfail-aws">Fixing SERVFAIL DNS Resolution for AWS Console with Pi-hole + Unbound</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/proxmox-sysad">Proxmox: Systems Administration Notes</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/engineer/LAB/proxmox-terraform">Proxmox: Deploying Infrastructure with Terraform</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" tabindex="0" href="/docs/engineer/Misc/algos-system-design">Misc</a></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/archive/docker-wordpress/docker-wordpress-1">🗃 Archive</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/category/-engineer"><span>💻 Engineer</span></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">LAB</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Mount Proxmox VM Logical Volumes for Direct Filesystem Access</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Mount Proxmox VM Logical Volumes for Direct Filesystem Access</h1></header><h2 class="anchor anchorWithStickyNavbar_LWe7" id="background">Background<a href="#background" class="hash-link" aria-label="Direct link to Background" title="Direct link to Background">​</a></h2>
<p>I created an Ubuntu VM using Packer, which was supposed to bootstrap my username &amp; ssh_key access when the VM was running but instead the packer build process would time out and rollback destroying the VM and any logs I needed to troubleshoot what was happening. I managed to clone the VM before it was destroyed again, but there was no root account and I could see my username had made it into the <code>/etc/passwd</code> file by using <code>qm guest exec &lt;vmid /&gt; cat /etc/passwd</code> from the proxmox host. I couldn&#x27;t use the <code>qm</code> command to try to set a password for my user, so I decided to go old school and mount the VM disk (volume) and edit things from there.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="related-proxmox-troubleshooting--automation">Related Proxmox Troubleshooting &amp; Automation<a href="#related-proxmox-troubleshooting--automation" class="hash-link" aria-label="Direct link to Related Proxmox Troubleshooting &amp; Automation" title="Direct link to Related Proxmox Troubleshooting &amp; Automation">​</a></h2>
<p>🔧 <strong>Proxmox Troubleshooting Context</strong>: This advanced technique complements the automation workflow:</p>
<ul>
<li><strong>Root Cause</strong>: <a href="/docs/engineer/LAB/proxmox-packer-vm">Packer VM Template Creation</a> - The original Packer process that led to this troubleshooting</li>
<li><strong>Prevention</strong>: <a href="/docs/engineer/LAB/proxmox-cloudinit">Ansible VM Automation</a> - Automated deployment to avoid manual VM issues</li>
<li><strong>Complete Workflow</strong>: <a href="/docs/engineer/LAB/proxmox-hub">Proxmox Virtualization Hub</a> - End-to-end Proxmox automation and management</li>
</ul>
<p>🏗️ <strong>Advanced Infrastructure Skills</strong>: Build comprehensive troubleshooting capabilities:</p>
<ul>
<li><strong>Container Debugging</strong>: <a href="/docs/engineer/K8s/">Kubernetes Troubleshooting</a> - Similar debugging techniques for containers</li>
<li><strong>Home Lab Context</strong>: <a href="/docs/engineer/LAB/home-lab-hub">Home Lab Infrastructure Hub</a> - Complete infrastructure troubleshooting strategies</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="overview">Overview<a href="#overview" class="hash-link" aria-label="Direct link to Overview" title="Direct link to Overview">​</a></h2>
<p>We&#x27;re dealing with a LVM volumes on a Proxmox host, so this is the process of finding the necessary information, installing the right tools and getting to the point of mounting the voluming, editing the filesystem, unmounting and booting the VM up again with the &quot;fixed&quot; volume attached.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="lvm">LVM<a href="#lvm" class="hash-link" aria-label="Direct link to LVM" title="Direct link to LVM">​</a></h2>
<p>Check out your logical volumes, in volume group (VG) <code>pve</code>:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:~# lvs</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  LV            VG  Attr       LSize    Pool Origin Data%  Meta%  Move Log Cpy%Sync Convert</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  data          pve twi-aotz-- &lt;794.79g             3.17   0.32</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  root          pve -wi-ao----   96.00g</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  swap          pve -wi-ao----    8.00g</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  vm-101-disk-0 pve Vwi-a-tz--   20.00g data        100.00</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  vm-200-disk-0 pve Vwi-aotz--   32.00g data        16.17</span><br></span></code></pre></div></div>
<p>use <code>lvdisplay</code> for more detailed info on each volume.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="vgchange">vgchange<a href="#vgchange" class="hash-link" aria-label="Direct link to vgchange" title="Direct link to vgchange">​</a></h3>
<p>I&#x27;m not 100% sure you need this step, but it&#x27;s one I did.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:~# vgchange --help</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  vgchange - Change volume group attributes</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  Change a general VG attribute.</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  For options listed in parentheses, any one is</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  required, after which the others are optional.</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  vgchange</span><br></span></code></pre></div></div>
<p>&quot;activate&quot; your volumes:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:~# vgchange -ay pve</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">  5 logical volume(s) in volume group &quot;pve&quot; now active</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="device-mappings">Device Mappings<a href="#device-mappings" class="hash-link" aria-label="Direct link to Device Mappings" title="Direct link to Device Mappings">​</a></h2>
<p>You need to create device mappings from the segments of the LV you want to mount, for this we&#x27;ll use <code>kpartx</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="kpartx">kpartx<a href="#kpartx" class="hash-link" aria-label="Direct link to kpartx" title="Direct link to kpartx">​</a></h3>
<p>install <code>kpartx</code> with <code>apt install -y kpartx</code> from the proxmox host (up to you if you want to <code>-y</code> that).</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>man kpartx</div><div class="admonitionContent_BuS1"><p>kpartx - Create device maps from partition tables</p><p>This  tool, derived from util-linux&#x27; partx, reads partition tables on specified device and create device maps over partitions segments detected. It  is  called  from  hotplug  upon device maps creation and deletion.</p></div></div>
<p>I can see the currently mapped devices under <code>/dev/mapper</code>, and I want my <code>vmid=101</code> disks:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:~# ls -l /dev/mapper/</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">total 0</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">crw------- 1 root root 10, 236 Apr 21 23:08 control</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-data -&gt; ../dm-5</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-data_tdata -&gt; ../dm-3</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-data_tmeta -&gt; ../dm-2</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-data-tpool -&gt; ../dm-4</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-root -&gt; ../dm-1</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 21 23:08 pve-swap -&gt; ../dm-0</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 27 22:20 pve-vm--101--disk--0 -&gt; ../dm-8</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx 1 root root       7 Apr 26 22:21 pve-vm--200--disk--0 -&gt; ../dm-6</span><br></span></code></pre></div></div>
<p>use <code>kpartx</code> to &quot;add mappings&quot; (<code>-av</code>, add, verbose) from that LV:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:~# kpartx -av /dev/mapper/pve-vm--101--disk--0</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">add map pve-vm--101--disk--0p1 (253:7): 0 2048 linear 253:8 2048</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">add map pve-vm--101--disk--0p2 (253:9): 0 41936896 linear 253:8 4096</span><br></span></code></pre></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="mount-device">Mount Device<a href="#mount-device" class="hash-link" aria-label="Direct link to Mount Device" title="Direct link to Mount Device">​</a></h2>
<p>Make a dir under <code>/mnt</code>, mount your newly mapped device, and check the mounted dir</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:/mnt# mkdir vm</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:/mnt# mount /dev/mapper/pve-vm--101--disk--0p2 /mnt/vm</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:/mnt# ls -l /mnt/vm</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">total 4030552</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root          7 Aug 24  2021 bin -&gt; usr/bin</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  3 root root       4096 Apr 27 09:39 boot</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Apr 27 09:18 cdrom</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  5 root root       4096 Aug 24  2021 dev</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x 97 root root       4096 Apr 27 09:41 etc</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  3 root root       4096 Apr 27 09:41 home</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root          7 Aug 24  2021 lib -&gt; usr/lib</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root          9 Aug 24  2021 lib32 -&gt; usr/lib32</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root          9 Aug 24  2021 lib64 -&gt; usr/lib64</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root         10 Aug 24  2021 libx32 -&gt; usr/libx32</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwx------  2 root root      16384 Apr 27 09:18 lost+found</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Aug 24  2021 media</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Aug 24  2021 mnt</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Aug 24  2021 opt</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Apr 15  2020 proc</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwx------  5 root root       4096 Apr 27 22:13 root</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x 11 root root       4096 Aug 24  2021 run</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lrwxrwxrwx  1 root root          8 Aug 24  2021 sbin -&gt; usr/sbin</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  7 root root       4096 Apr 27 13:45 snap</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Aug 24  2021 srv</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">-rw-------  1 root root 4127195136 Apr 27 09:19 swap.img</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x  2 root root       4096 Apr 15  2020 sys</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxrwxrwt  8 root root       4096 Apr 27 22:20 tmp</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x 14 root root       4096 Apr 27 09:38 usr</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">drwxr-xr-x 13 root root       4096 Aug 24  2021 var</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">root@pve1:/mnt#</span><br></span></code></pre></div></div>
<p>You can now make the changes you need to the filesystem, save, unmount and try rebooting the vm again with the edited volume. For me, I just needed to see what happed to the <code>sshd</code> config under <code>/etc/ssh/sshd_config</code> because Packer <code>autoinstall</code> was supposed to have set it to accept PubKey AuthN, instead I found this -&gt; <code>#PubkeyAuthentication yes</code>.</p>
<p>Back to the Packer configs to see what went wrong. Enjoy.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="references">References<a href="#references" class="hash-link" aria-label="Direct link to References" title="Direct link to References">​</a></h2>
<ul>
<li><a href="https://forum.proxmox.com/threads/how-to-mount-lvm-disk-of-vm.25218/" target="_blank" rel="noopener noreferrer">Proxmox Forum</a></li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="delete-device-mappings">delete device mappings<a href="#delete-device-mappings" class="hash-link" aria-label="Direct link to delete device mappings" title="Direct link to delete device mappings">​</a></h3>
<p>to reverse the kpartx mappings: <code>root@pve1:~# kpartx -av /dev/mapper/pve-vm--101--disk--0</code></p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="qemu-commands">qemu commands<a href="#qemu-commands" class="hash-link" aria-label="Direct link to qemu commands" title="Direct link to qemu commands">​</a></h3>
<p>some useful <code>qm</code> commands:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">qm guest exec &lt;vmid /&gt; &lt;command /&gt;</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain"># more to come</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-tags-row"><div class="col"><b>Tags:</b><ul class="tags_jXut padding--none margin-left--sm"><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/proxmox">proxmox</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/lvm">lvm</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/troubleshooting">troubleshooting</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/virtualization">virtualization</a></li><li class="tag_QGVx"><a rel="tag" class="tag_zVej tagRegular_sFm0" href="/docs/tags/system-admin">system-admin</a></li></ul></div></div><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/engineer/LAB/proxmox-lvm-mount.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2025-09-22T07:31:42.000Z" itemprop="dateModified">Sep 22, 2025</time></b> by <b>Ron Amosa</b></span></div></div></footer></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/engineer/LAB/Terminal"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Ultimate Linux Terminal Setup - Oh My Zsh, Powerlevel10k, and Productivity Tools</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/engineer/LAB/pihole-docker-unbound"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Pi-hole with Unbound DNS: Complete Docker Setup for Privacy &amp; Ad-Blocking</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#background" class="table-of-contents__link toc-highlight">Background</a></li><li><a href="#related-proxmox-troubleshooting--automation" class="table-of-contents__link toc-highlight">Related Proxmox Troubleshooting &amp; Automation</a></li><li><a href="#overview" class="table-of-contents__link toc-highlight">Overview</a></li><li><a href="#lvm" class="table-of-contents__link toc-highlight">LVM</a><ul><li><a href="#vgchange" class="table-of-contents__link toc-highlight">vgchange</a></li></ul></li><li><a href="#device-mappings" class="table-of-contents__link toc-highlight">Device Mappings</a><ul><li><a href="#kpartx" class="table-of-contents__link toc-highlight">kpartx</a></li></ul></li><li><a href="#mount-device" class="table-of-contents__link toc-highlight">Mount Device</a></li><li><a href="#references" class="table-of-contents__link toc-highlight">References</a><ul><li><a href="#delete-device-mappings" class="table-of-contents__link toc-highlight">delete device mappings</a></li><li><a href="#qemu-commands" class="table-of-contents__link toc-highlight">qemu commands</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/ron-amosa/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/ronamosa/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@uncommonengineer" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Discover</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Docs</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Last updated on Mon Sep 22 2025</div></div></div></footer></div>
</body>
</html>