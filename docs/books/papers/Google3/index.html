<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-books/papers/Google3" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.8.1">
<title data-rh="true">Google Monorepo Paper | The Uncommon Engineer</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" property="og:image" content="https://www.uncommonengineer.com/img/social-card.png"><meta data-rh="true" name="twitter:image" content="https://www.uncommonengineer.com/img/social-card.png"><meta data-rh="true" property="og:url" content="https://www.uncommonengineer.com/docs/books/papers/Google3"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Google Monorepo Paper | The Uncommon Engineer"><meta data-rh="true" name="description" content="My reading and notes of the Google Paper: &quot;Why Google Stores Billions of Lines of Code in a Single Repository&quot; by Authors Rachel Potvin &amp; Josh Levenberg."><meta data-rh="true" property="og:description" content="My reading and notes of the Google Paper: &quot;Why Google Stores Billions of Lines of Code in a Single Repository&quot; by Authors Rachel Potvin &amp; Josh Levenberg."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://www.uncommonengineer.com/docs/books/papers/Google3"><link data-rh="true" rel="alternate" href="https://www.uncommonengineer.com/docs/books/papers/Google3" hreflang="en"><link data-rh="true" rel="alternate" href="https://www.uncommonengineer.com/docs/books/papers/Google3" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://9UFF3RBJQ9-dsn.algolia.net" crossorigin="anonymous"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Google Monorepo Paper","item":"https://www.uncommonengineer.com/docs/books/papers/Google3"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="The Uncommon Engineer RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="The Uncommon Engineer Atom Feed">




<link rel="search" type="application/opensearchdescription+xml" title="The Uncommon Engineer" href="/opensearch.xml">

<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-DMRNTVGLRC"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-DMRNTVGLRC",{anonymize_ip:!0})</script>

<script src="/js/console-clue.js"></script>
<script src="/js/metricool.js"></script>
<script src="https://subscribe-forms.beehiiv.com/embed.js" async></script><link rel="stylesheet" href="/assets/css/styles.5170efae.css">
<script src="/assets/js/runtime~main.3d5cd519.js" defer="defer"></script>
<script src="/assets/js/main.727d0b4f.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t="dark";var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",e||t),document.documentElement.setAttribute("data-theme-choice",e||t)}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/profile.svg" alt="The Uncommon Engineer" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/profile.svg" alt="The Uncommon Engineer" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Uncommon Engineer</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/">Technical</a><a class="navbar__item navbar__link" href="/blog/">Analysis &amp; Essays</a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/about/">About</a><a class="navbar__item navbar__link" href="/projects/">Projects</a><a class="navbar__item navbar__link" href="/changelog/">Changelog</a><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search (Command+K)"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/">‚ñ∂ Start Here</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" href="/docs/books/reading-list">üìö Books &amp; Papers</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/reading-list">üìë Tech Professional Reading List - Books for Engineers and Leaders</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/books/12fa">üìÑ 12 Factor App Methodology - Modern Cloud Application Development Principles</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" role="button" aria-expanded="true" tabindex="0" href="/docs/books/papers/Google3">üìö Papers</a></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/books/papers/Google3">Google Monorepo Paper</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/study/SCS-C01/">üìó Study</a></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/Ô∏è-hacker">üè¥‚Äç‚ò†Ô∏è Hacker</a><button aria-label="Expand sidebar category &#x27;üè¥‚Äç‚ò†Ô∏è Hacker&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed red"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/docs/category/-engineer">üíª Engineer</a><button aria-label="Expand sidebar category &#x27;üíª Engineer&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret" role="button" aria-expanded="false" href="/docs/archive/docker-wordpress/docker-wordpress-1">üóÉ Archive</a></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">üìö Books &amp; Papers</span></li><li class="breadcrumbs__item"><span class="breadcrumbs__link">üìö Papers</span></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Google Monorepo Paper</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Google Monorepo Paper</h1></header><div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>info</div><div class="admonitionContent_BuS1"><p>My reading and notes of the Google Paper: <a href="https://dl.acm.org/doi/pdf/10.1145/2854146" target="_blank" rel="noopener noreferrer">&quot;Why Google Stores Billions of Lines of Code in a Single Repository&quot;</a> by Authors Rachel Potvin &amp; Josh Levenberg.</p><p>Youtube Version: <a href="https://www.youtube.com/watch?v=W71BTkUbdqE" target="_blank" rel="noopener noreferrer">here</a></p></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="notes">Notes<a href="#notes" class="hash-link" aria-label="Direct link to Notes" title="Direct link to Notes">‚Äã</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-details">Key Details<a href="#key-details" class="hash-link" aria-label="Direct link to Key Details" title="Direct link to Key Details">‚Äã</a></h3>
<ul>
<li>Google uses a custom Version Control System (VCS) called Piper &amp; CitC</li>
<li>Piper distributed across 10 x Data Centres around the world</li>
<li>Piper is used by 95% of Google Developers situated around the globe</li>
<li>Developers use &quot;trunk-based&quot; development at Google</li>
<li>Lot of custom tooling and practices by Google to enable effective use of Monolithic Repo</li>
<li>Google codebase size = 1B files, 86TB of data including 35 millions commits across 18 years.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="piper">Piper<a href="#piper" class="hash-link" aria-label="Direct link to Piper" title="Direct link to Piper">‚Äã</a></h3>
<p>Google tried looking for a commercial solution for their VCS needs, but couldn&#x27;t find one so built Piper.</p>
<p>All the code commits, 25,000 SE&#x27;s around the world commiting typically 16,000 changes, 24,000 changes by way of automated systems.</p>
<p>Single large repo on top of Google infra, first <a href="https://static.googleusercontent.com/media/research.google.com/en//archive/bigtable-osdi06.pdf" target="_blank" rel="noopener noreferrer">Big table</a></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Big Table</div><div class="admonitionContent_BuS1"><p>&quot;Bigtable is a distributed storage system for managing structured data that is designed to scale to a very large size: petabytes of data across thousands of commodity
servers. &quot;</p></div></div>
<p>now <a href="https://research.google/pubs/pub39966/" target="_blank" rel="noopener noreferrer">Spanner</a></p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Google Spanner</div><div class="admonitionContent_BuS1"><p>&quot;Spanner is Google&#x27;s scalable, multi-version, globally-distributed, and synchronously-replicated database. It is the first system to distribute data at global scale and support externally-consistent distributed transactions.&quot;</p></div></div>
<p>Piper = dist. over 10 x Google Data Centre&#x27;s use <a href="https://en.wikipedia.org/wiki/Paxos_(computer_science)" target="_blank" rel="noopener noreferrer">Paxos algorithm</a> for consistency across replicas.</p>
<div class="theme-admonition theme-admonition-info admonition_xJq3 alert alert--info"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 14 16"><path fill-rule="evenodd" d="M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"></path></svg></span>Paxos Algorithm</div><div class="admonitionContent_BuS1"><p><em>Paxos is a family of protocols for solving consensus in a network of unreliable or fallible processors. Consensus is the process of agreeing on one result among a group of participants. This problem becomes difficult when the participants or their communications may experience failures.[1]</em>- Wiki</p></div></div>
<p>Interesting reference in Googles <a href="https://sre.google/sre-book/managing-critical-state/" target="_blank" rel="noopener noreferrer">&quot;Site Reliability Engineering&quot;</a> <em>&quot;Chapter 23 - Managing Critical State: Distributed Consensus for Reliability&quot;</em> to Paxos Algorithm as SRE would be super interested and invested in distributed systems consistency.</p>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>System Architecture Patterns</div><div class="admonitionContent_BuS1"><p>Also check out <a href="https://sre.google/sre-book/managing-critical-state/" target="_blank" rel="noopener noreferrer">System Architecture Patterns for Distributed Consensus</a> in the Google SRE book.</p></div></div>
<p>Architected for high level of redundancy and optimize latency across 10 x Data Centres</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="clients-in-the-cloud-citc">Clients in the Cloud (CitC)<a href="#clients-in-the-cloud-citc" class="hash-link" aria-label="Direct link to Clients in the Cloud (CitC)" title="Direct link to Clients in the Cloud (CitC)">‚Äã</a></h3>
<ul>
<li>CitC is how developers access Piper (VCS)</li>
<li>CitC is a &quot;cloud-based storage backend + Linux-only FUSE file system&quot;</li>
<li>Developers see their workspaces as directories in the file system, and can use normal Unix tools to browse, view edit files without needing to create a local state copy of the files.</li>
<li>Workspace is &quot;in the cloud&quot;, so change location change machine, developers work state persists independently.</li>
<li>all &quot;writes&quot; stored as CitC &#x27;snapshots&#x27;, so can roll back any writes.</li>
<li>Developers see their local changes &quot;overlaid on top&quot; of the full Piper repo</li>
<li>Developers can navigate and edit files across whole codebase</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="tools-for-code">Tools for Code<a href="#tools-for-code" class="hash-link" aria-label="Direct link to Tools for Code" title="Direct link to Tools for Code">‚Äã</a></h3>
<p>A bunch of tools were developed to help Google do monolithic repo at the scale it does, so would be advisable to look at the same if you were to go this route.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="trunk-based-development">Trunk-based Development<a href="#trunk-based-development" class="hash-link" aria-label="Direct link to Trunk-based Development" title="Direct link to Trunk-based Development">‚Äã</a></h2>
<p>Developers work at &#x27;HEAD&#x27; (most recent version of code) and the copy or clone is called the &quot;trunk&quot; or main. Difference? Branch-based developement more prone to merge conflicts due to long-lived branches clashing when they finally come back to &quot;main&quot;. Trunk has a single consistent view, always and frequently coming back to &quot;main&quot;. &quot;Branch-based&quot; unusual and not supported at Google.</p>
<p>Release branches = cut from specific versions of the repo and usually a snapshot of HEAD to maintain stability.
Bug fixes = developed on main.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="feature-flags">Feature Flags<a href="#feature-flags" class="hash-link" aria-label="Direct link to Feature Flags" title="Direct link to Feature Flags">‚Äã</a></h3>
<p>old &amp; new code exist behind feature flags (mainly project-specific code, not library code), avoids need for &quot;developement&quot; branches and easier to toggle things. Also think &#x27;A/B&#x27; testing via flags, which Google uses using flags.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="workflow-best-practices">Workflow Best Practices<a href="#workflow-best-practices" class="hash-link" aria-label="Direct link to Workflow Best Practices" title="Direct link to Workflow Best Practices">‚Äã</a></h3>
<p>CICD i.e. automated testing after almost every commit, to rebuild all affected dependencies. If a change breaks too much stuff, system auto removes it. Google &quot;presubmit&quot; infrastructure does CI and automated testing <em>before</em> that code is added to the codebase.</p>
<p>ALL code is reviewed before commit, so there&#x27;s a little culture pressure there to &quot;not commit bad code&quot;. Theme here &quot;dont commit bad code&quot; - how to avoid? Code reviews &amp; code ownership.</p>
<p>Code ownership = every directory in the monolith has code ownership of that directory, so they control who can commit code to their codebase/directory. How does it typically work? 1 x code review from a Developer from that codebase and 1 x commit approval from the &quot;code owner&quot; of that directory/codebase.</p>
<blockquote>
<p><em>&quot;Google has developed a number of practices and tools to support its enormous monolithic codebase, including trunk-based development, the distributed source-code repository Piper, the workspace client CitC, and workflow-support-tools, Critique, CodeSearch, Tricorder, and Rosie.&quot;</em></p>
</blockquote>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="advantages">Advantages<a href="#advantages" class="hash-link" aria-label="Direct link to Advantages" title="Direct link to Advantages">‚Äã</a></h2>
<ol>
<li>one source of truth i.e. unified versioning (see <a href="https://jlbp.dev/what-is-a-diamond-dependency-conflict" target="_blank" rel="noopener noreferrer">&quot;Diamond Dependency Problem&quot;</a>)</li>
<li>code sharing &amp; re-use - i.e. cos its all in one repo, tools, libraries can be found, shared easily</li>
<li>atomic changes - i.e. developer knows they can change one thing in &quot;the&quot; repo, and it&#x27;s changed for ALL e.g. depdendencies etc.</li>
<li>large-scale refactoring</li>
<li>flexible team boundaries, code ownership i.e. because all in one repo, boundaries and code ownership is marked by directories</li>
<li>code visibility, clear tree structure, means implicit team namespacing.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="trade-offs">Trade-offs<a href="#trade-offs" class="hash-link" aria-label="Direct link to Trade-offs" title="Direct link to Trade-offs">‚Äã</a></h2>
<p>Main costs to this model are:</p>
<ol>
<li>tooling investment for dev work and operational work, as the code scales, so does investment in developing and maintaining these tools</li>
<li>codebase complexity e.g. dependency issues, code discovery difficulty</li>
<li>investment in &quot;code health&quot;</li>
</ol>
<p>notes on codebase complexity - investments in code search, tools like &quot;grep&quot; get bogged down (discovery) as codebase scales. argument that developers searching and finding other tools and API&#x27;s to use is good for code re-use, but also creates over dependency (or too easy to add deps) of existing code vs thinking-out your own code or API design, make retro code clean up messier/error-prone.</p>
<p>devs need to be aware of their dependency graphs, and unnecessary deps can lead to downstream build breaks.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="documentation">Documentation<a href="#documentation" class="hash-link" aria-label="Direct link to Documentation" title="Direct link to Documentation">‚Äã</a></h3>
<p>This was super interesting:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">The fact that most Google code is</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">available to all Google developers has</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">led to a culture where some teams ex-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">pect other developers to read their</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">code rather than providing them with</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">separate user documentation.</span><br></span></code></pre></div></div>
<p>the classic &quot;just read the code&quot;, the advantage for the anti-documentation engineer was &quot;no effort required for writing &amp; maintaining docs&quot;, but one aspect I have never considered was this...</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">but devel-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">opers sometimes read more than the</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">API code and end up relying on under-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">lying implementation details. This be-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">havior can create a maintenance bur-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">den for teams that then have trouble</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">deprecating features they never meant</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">to expose to users</span><br></span></code></pre></div></div>
<p>Where the external team, bases their work on the <em>underlying</em> implementation of your code/API, and now your team can&#x27;t mess with that to move your own code off somewhere else, because the external team is dependent on that which locks you in as well!</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="code-health">Code Health<a href="#code-health" class="hash-link" aria-label="Direct link to Code Health" title="Direct link to Code Health">‚Äã</a></h3>
<p>lots of tools to maintain code health that auto removes dead code, splits up large refactors, auto-assigns code reviews. but sounds like there&#x27;s a big human toll of managing this clean up and health work for the code, including simple refactoring that need eyeballs and reviews because its codebase-wide.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="conclusion">Conclusion<a href="#conclusion" class="hash-link" aria-label="Direct link to Conclusion" title="Direct link to Conclusion">‚Äã</a></h2>
<p>Basically, while it can be done:</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">At Google, we have found, with some</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">investment, the monolithic model of</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">source management can scale success-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">fully to a codebase with more than one</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">billion files, 35 million commits, and</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">thousands of users around the globe. </span><br></span></code></pre></div></div>
<p>doesn&#x27;t mean its for everyone</p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#d6deeb;--prism-background-color:#011627"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#d6deeb;background-color:#011627"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#d6deeb"><span class="token plain">The monolithic model of source</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">code management is not for everyone.</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">It is best suited to organizations like</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">Google, with an open and collabora-</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">tive culture. It would not work well</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">for organizations where large parts</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">of the codebase are private or hidden</span><br></span><span class="token-line" style="color:#d6deeb"><span class="token plain">between groups.</span><br></span></code></pre></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/ronamosa/ronamosa.github.io/edit/main/website/docs/books/papers/Google3.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"><span class="theme-last-updated">Last updated<!-- --> on <b><time datetime="2026-02-20T20:05:57.000Z" itemprop="dateModified">Feb 20, 2026</time></b> by <b>Ron Amosa</b></span></div></div></footer><div class="newsletterCta_rTTm"><p><span class="emoji_bVKv">üì¨</span> I also write a fortnightly newsletter ‚Äî my thoughts on the machines that educate, empower, and exploit our society.<!-- --> <a href="/subscribe">Subscribe here.</a></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/books/12fa"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">üìÑ 12 Factor App Methodology - Modern Cloud Application Development Principles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/study/SCS-C01/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">AWS Certified Security ‚Äì Specialty (SCS-C01)</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#notes" class="table-of-contents__link toc-highlight">Notes</a><ul><li><a href="#key-details" class="table-of-contents__link toc-highlight">Key Details</a></li><li><a href="#piper" class="table-of-contents__link toc-highlight">Piper</a></li><li><a href="#clients-in-the-cloud-citc" class="table-of-contents__link toc-highlight">Clients in the Cloud (CitC)</a></li><li><a href="#tools-for-code" class="table-of-contents__link toc-highlight">Tools for Code</a></li></ul></li><li><a href="#trunk-based-development" class="table-of-contents__link toc-highlight">Trunk-based Development</a><ul><li><a href="#feature-flags" class="table-of-contents__link toc-highlight">Feature Flags</a></li><li><a href="#workflow-best-practices" class="table-of-contents__link toc-highlight">Workflow Best Practices</a></li></ul></li><li><a href="#advantages" class="table-of-contents__link toc-highlight">Advantages</a></li><li><a href="#trade-offs" class="table-of-contents__link toc-highlight">Trade-offs</a><ul><li><a href="#documentation" class="table-of-contents__link toc-highlight">Documentation</a></li><li><a href="#code-health" class="table-of-contents__link toc-highlight">Code Health</a></li></ul></li><li><a href="#conclusion" class="table-of-contents__link toc-highlight">Conclusion</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Connect</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://www.linkedin.com/in/ron-amosa/" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://github.com/ronamosa/" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.youtube.com/@uncommonengineer" target="_blank" rel="noopener noreferrer" class="footer__link-item">YouTube<svg width="13.5" height="13.5" aria-hidden="true" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Discover</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/blog">Analysis &amp; Essays</a></li><li class="footer__item"><a class="footer__link-item" href="/docs">Technical</a></li><li class="footer__item"><a class="footer__link-item" href="/about">About</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Last updated on Fri Feb 20 2026</div></div></div></footer></div>
</body>
</html>